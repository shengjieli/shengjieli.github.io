# collectionsæ¨¡å—ä¸­ç›¸å…³ç±»çš„ä½¿ç”¨ï¼ˆä¸Šï¼‰
ä»Šå¤©æˆ‘ä»¬æ¥çœ‹ä¸‹`Python`ä¸­`collections`æ¨¡å—ä¸­çš„å‡ ä¸ªæ•°æ®ç±»å‹ã€‚

åœ¨`Python`ä¸­ï¼Œé™¤äº†æˆ‘ä»¬ç»å¸¸ç”¨åˆ°çš„`tuple`,`list`,`set`,`dict`è¿™äº›åŸºç¡€çš„å®¹å™¨ç±»å‹ï¼Œåœ¨`collections`æ¨¡å—ä¸­è¿˜æä¾›äº†`namedtuple`,`deque`,`Counter`,`OrderedDict`,`defaultdict`è¿™äº›å®¹å™¨ç±»å‹ã€‚è¿™äº›ç±»å‹éƒ½æ˜¯åŸºç¡€ç±»å‹çš„æ‰©å±•ï¼Œä»Šå¤©æˆ‘ä»¬å…ˆä»‹ç»ä¸‹å…¶ä¸­çš„ä¸‰ä¸ª:`Counter`,`OrderedDict`,`defaultdict`ã€‚

**æœ¬ç¯‡æ–‡ç« ä»£ç åŸºäº`Python2.7`**

ç°åœ¨æœ‰ä¸€ä¸ªé—®é¢˜ï¼šç»Ÿè®¡ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—ç¬¦å‡ºç°çš„æ¬¡æ•°ã€‚

è¿™ä¸ªé—®é¢˜å¾ˆç®€å•ï¼Œæœ€å®¹æ˜“æƒ³åˆ°çš„æ–¹æ³•åº”è¯¥å°±æ˜¯ä¸‹è¾¹è¿™ç§ï¼š
```python
s = 'qpopihsfhsaflsnvjkcnmqpokopajsdfahd'
results = dict()
for char in s:
    if char in results:
        results[char]+=1
    else:
        results[char] = 1
for char, cnt in results.items():
    print char, cnt
```

å¦‚æœæŒ‰ä»£ç è¡Œæ•°å‘å·¥èµ„çš„è¯ï¼Œé‚£è¿™ç§æ–¹æ³•æ— ç–‘æ˜¯æœ€å¥½çš„ğŸ˜„ã€‚é‚£æœ‰æ²¡æœ‰ä¼˜é›…ä¸€ç‚¹çš„æ–¹æ³•å‘¢ï¼Ÿ
æ¥ä¸‹æ¥æˆ‘ä»¬ä»‹ç»`collections`æ¨¡å—ä¸­çš„`defaultdict`å¯¹è±¡ï¼Œå…ˆçœ‹ä¸‹å¦‚ä½•ç”¨`defaultdict`ä¼˜é›…çš„è§£å†³è¿™ä¸ªé—®é¢˜ï¼š
```python
from collections import defaultdict
s = 'qpopihsfhsaflsnvjkcnmqpokopajsdfahd'
results = defaultdict(int)
for char in s:
    results[char]+=1
for char, cnt in results.items():
    print char, cnt
```
`defaultdict`æ˜¯`dict`çš„å­ç±»ï¼Œç”¨æ³•å¾ˆç®€å•ï¼Œå°±æ˜¯ä¼ ä¸€ä¸ªå‡½æ•°è¿›å»å°±è¡Œäº†ï¼Œå½“è·å–ä¸€ä¸ª`defaultdict`ä¸­ä¸å­˜åœ¨çš„é”®æ—¶ï¼Œä¼šç”¨è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼ä½œä¸ºè¿™ä¸ªé”®çš„å€¼ã€‚

çœ‹èµ·æ¥ç”¨`defaultdict`å¥½åƒä¹Ÿæ²¡æœ‰ä¼˜é›…å¤šå°‘ï¼Œé‚£æœ‰æ²¡æœ‰æ›´ä¼˜é›…ä¸€ç‚¹çš„æ–¹æ³•äº†å‘¢ï¼Ÿå½“ç„¶æ˜¯æœ‰çš„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç”¨`collections`æ¨¡å—çš„`Counter`å¯¹è±¡è§£å†³è¿™ä¸ªé—®é¢˜ï¼š
```python
from collections import Counter
s = 'qpopihsfhsaflsnvjkcnmqpokopajsdfahd'
results = Counter(s)
for char, cnt in results.items():
    print char, cnt
```
è¿™ç§å†™æ³•æ˜¯ä¸æ˜¯å¾ˆ`pythonic`å‘¢ï¼Ÿ
`Counter`å¯¹è±¡ä¹Ÿæ˜¯`dict`çš„å­ç±»ï¼Œå®ƒæ˜¯ç”¨æ¥è®¡æ•°çš„ä¸€ä¸ªå·¥å…·ã€‚`Counter`å¯¹è±¡ä¸ä»…å¯ä»¥ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²æ¥åˆå§‹åŒ–ï¼Œä»»ä½•å¯è¿­ä»£å¯¹è±¡æˆ–è€…å­—å…¸éƒ½å¯ä»¥ç”¨æ¥åˆå§‹åŒ–ä¸€ä¸ª`Counter`å¯¹è±¡ã€‚
```python
c = Counter(['eggs', 'ham'])
c = Counter({'red': 4, 'blue': 2}) 
```
è¿˜å¯ä»¥åˆå§‹åŒ–ä¸€ä¸ªç©ºçš„`Counter`æˆ–è€…ç”¨å…³é”®å­—å‚æ•°åˆå§‹åŒ–ï¼š
```python
c = Counter()
c = Counter(cats=4, dogs=8)
```
`Counter`å¯¹è±¡ä¹Ÿæ”¯æŒç±»ä¼¼`dict`çš„ç”¨æ³•ï¼š
```python
c = Counter()
c['a'] = 4
c['b'] = 3
print c
del c['a']
print c
```
è¾“å‡ºï¼š
```
Counter({'a': 4, 'b': 3})
Counter({'b': 3})
```

æ³¨ï¼šè¿˜æœ‰ä¸€ä¸ª`update`æ–¹æ³•å’Œå­—å…¸ä¸åŒï¼Œ`defaultdict`çš„`update`æ–¹æ³•æ˜¯æ·»åŠ è®¡æ•°

é™¤äº†`dict`æ”¯æŒçš„ä¸€äº›æ–¹æ³•ï¼Œ`defaultdict`è¿˜æœ‰ä¸€äº›è‡ªå·±ç‹¬ç‰¹çš„æ–¹æ³•ï¼š
###### `elements()`ï¼šè¿”å›æ¯ä¸ªå…ƒç´ ï¼Œå…ƒç´ å‡ºç°å‡ æ¬¡å°±é‡å¤å‡ æ¬¡ï¼Œæ— åºè¿”å›ã€‚å¦‚æœå…ƒç´ çš„è®¡æ•°å°äº1ï¼Œåˆ™å¿½ç•¥ã€‚
```python
c = Counter(a=4, b=2, c=0, d=-2)
print list(c.elements())
```
è¾“å‡ºï¼š
```
['a', 'a', 'a', 'a', 'b', 'b']
```
###### `most_common([n])`ï¼šè¿”å›nä¸ªè®¡æ•°æœ€å¤šçš„å…ƒç´ åŠå…¶è®¡æ•°çš„åˆ—è¡¨ï¼Œæ¬¡æ•°ä»æœ€å¤šåˆ°æœ€å°‘ã€‚å¦‚æœçœç•¥nï¼Œåˆ™è¿”å›è®¡æ•°å™¨ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼š
```python
print Counter('abracadabra').most_common(3)
```
è¾“å‡ºï¼š
```
[('a', 5), ('r', 2), ('b', 2)]
```
###### `subtract([iterable-or-mapping])`:ä»ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ã€mapæˆ–è®¡æ•°å™¨ä¸­å‡å»å…ƒç´ ï¼š
```python
c = Counter(a=4, b=2, c=0, d=-2)
d = Counter(a=1, b=2, c=3, d=4)
c.subtract(d)
print c
```
è¾“å‡ºï¼š
```
Counter({'a': 3, 'b': 0, 'c': -3, 'd': -6})
```

`defaultdict`å’Œ`Counter`éƒ½æ˜¯`dict`çš„å­ç±»ï¼Œè¿˜æœ‰ä¸€ä¸ª`OrderedDict`ä¹Ÿæ˜¯`dict`çš„å­ç±»ï¼Œçœ‹åå­—å°±çŸ¥é“ï¼Œè¿™æ˜¯ä¸€ä¸ªæœ‰åºçš„`dict`ã€‚ç”±äº`dict`åº•å±‚å­˜å‚¨æ–¹å¼çš„ç‰¹æ®Šæ€§ï¼Œä¸€èˆ¬`dict`æ˜¯æ— åºçš„ã€‚å½“éœ€è¦æœ‰åºçš„`dict`æ—¶ï¼Œå°±å¯ä»¥ç”¨`OrderedDict`ã€‚`OrderedDict`çš„ä½¿ç”¨ä¹Ÿéå¸¸ç®€å•ï¼š
```python
d = {'banana': 3, 'apple': 4, 'pear': 1, 'orange': 2}
print d
d = OrderedDict(sorted(d.items(), key=lambda t: t[0]))
print d
```
è¾“å‡ºï¼š
```
{'orange': 2, 'pear': 1, 'banana': 3, 'apple': 4}
OrderedDict([('apple', 4), ('banana', 3), ('orange', 2), ('pear', 1)])
```


