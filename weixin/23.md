# 招聘数据分析

上篇文章介绍了如何使用asycnio和aiohttp并发抓取某公司招聘网站的职位信息。数据有了，今天，我们来用这些数据做一个分析，看下用这家公司的职位数据能得到哪些信息。

本篇文章分析全部基于2019-9-16抓取的网站数据（本文分析使用全部抓取的数据分析，没有过滤掉发布时间太久的）

首先我们先用departmentName(部门名称)这个字段来分析一下这家公司的组织架构。先用代码对所有部门去重并把部门按照"-"分割成子部门，然后打印出部门树形结构。

```python
import MySQLdb
import json


def get_res():
    """
    获取数据库中的所有部门并去重
    """
    conn = MySQLdb.connect(host="127.0.0.1", user="", passwd="", db="job")
    cur = conn.cursor()
    sql = "select distinct departmentName from alibaba"
    ret = cur.execute(sql)
    res = [each[0] for each in cur.fetchall()]
    return res


def pprint(l, level=10):
    """
    每多一级子部门就多打印一个tab，可以更好的显示部门之间的上下级关系
    """
    for i in l:
        print("\t"*i["level"] + i["name"])
        if i["level"] < level:
            pprint(i["sub"], level)


def main():
    res = get_res()
    l = []
    for each in res:
        columns = each.split("-")
        d = l
        for idx, col in enumerate(columns):
            node = list(filter(lambda x:x["name"] == col, d))
            if not node:
                node = {"name": col, "level": idx, "sub": []}
                d.append(node)
            else:
                node = node[0]
            d = node["sub"]
    # print(json.dumps(l, ensure_ascii=False))
    pprint(l, 1)


if __name__ == "__main__":
    main()
```

上次总共抓取到6000多条职位信息，但是统计出来的部门去重后有3000多个。由于数据量太大，只打印两级部门，想看更多数据的可以自行修改代码参数并运行。

```
菜鸟
	国际
	品牌与公众沟通部
	CTO
	CFO
	末端事业部
	数据&规划部
	智慧物流基础设施
	市场部
	人力资源
	快递&消费者运营事业部
	廉正合规部(审计)
	产品部
	超市物流&仓储网络
	客户运营中心
	行业物流供应链
	柔性自动化实验室
	法务部
	高管支持
	运输网络部
	公共事务部
	零售通物流供应链
蚂蚁金服
	支付宝事业群
	客户服务及权益保障事业部
	法务及合规部
	财务融资部
	数字金融线
	CTO 线
	行政部
	商业决策部
	集团市场部
	智能科技事业群
	大安全
	罗汉堂
	人力资源部
	全面风险管理部
	研究院
	廉正合规部
	投资及企业发展部
	采购部
	智能客户资金部
	国际事业群
	CEO办公室
	公共事务部
	数字货币
	内审部
阿里集团
	新零售技术事业群
	高德事业群
	阿里云智能事业群
	大文娱事业群
	盒马
	CPO线
	创新业务事业群
	天猫事业群
	B类事业群
	淘宝事业群
	CFO线
	法务线
	GR线
	CCO线
	CMO线
	后勤线
	CRO线
	集团管理线
	阿里妈妈事业群
	天猫超市事业群
	PR线
	天猫进出口事业群
	全球游及国际业务线
	思过崖线
	投资基金线
口碑
	产技数中心
	财务部
	公关部
	餐饮营销事业部
	本地生活商家产品中心
	本地生活用户产品中心
	人力资源部
	生活服务事业部
	服务中心
	市场运营部
	餐饮服务事业部
	风控与安全中心
	业务中台
	法务部
	商业推广事业部
互动娱乐事业部
	美术中台
	质量管理部
	技术中台
	工作室群
	创新实验室
	大市场中台
	TA中心
阿里健康
	政府事务
	研发部
	法务部
	医药电商
	互联网医疗事业部
	引擎&算法
	医疗产品部
	业务合作&BI
	智慧医疗
	客服体验
	消费医疗
	电商产品部
	追溯码
	财务部
	HR & Admin
	UED
	信息安全
	公共关系
Lazada
	Group
互动娱乐事业部IEU
	质量管理部
	工作室群
	交易猫业务线
	互动娱乐事业部
	九游业务线
	合作支持组
银泰商业
	人力资源&行政部
	企业策划部
	产品技术部
	财务管理部
	工程物业部
	绍兴区
	武汉区
	北京区
	成本控制部
	商品中心
	杭州区
	温州区
	品牌公关部
	福建区
阿里影业
	产品技术
	大宣发业务中心
	拾穗工作室
	法务部
	阿里鱼
	财务中心
	国际业务平台
	艺人经纪
亚博科技
	智力互动事业部
	体娱&国际
	市场&UED
	彩票产品技术中心
	彩票运营部
	财务及审计
	HR&Admin
网商银行
	网商银行
阿里体育
	用户运营部
	场馆部
	设计部
	产品部
	技术部
	电竞部
	财务部
	内容部
AliJapan
	商家运营部
湖畔大学
	在线运营

然后我们来分析下各部门的招聘人数，因为部门名称太多，就不根据部门名称来分组了，先用一级部门名称看下：

select count(*) cnt,SUBSTRING_INDEX(departmentName, "-", 1) dept1 from alibaba group by dept1 order by cnt desc;

+------+--------------------------+
| cnt  | dept1                    |
+------+--------------------------+
| 4541 | 阿里集团                 |
|  518 | 蚂蚁金服                 |
|  314 | 菜鸟                     |
|  296 | 口碑                     |
|  107 | 银泰商业                 |
|   89 | 互动娱乐事业部           |
|   84 | 阿里健康                 |
|   55 | 阿里影业                 |
|   33 | Lazada                   |
|   30 | 网商银行                 |
|   22 | 阿里体育                 |
|   20 | 互动娱乐事业部IEU        |
|   16 | 亚博科技                 |
|    7 | AliJapan                 |
|    1 | 湖畔大学                 |
+------+--------------------------+
```

排名第一的部门是阿里集团，从上边的组织架构中可以看到，阿里云智能事业群，天猫事业群，淘宝事业群都在阿里集团下，所以，阿里集团招聘职位最多也就不奇怪了。

再看下阿里集团下哪些事业群招聘人数最多：

```sql
select count(*) cnt,SUBSTRING_INDEX(departmentName, "-", 2) dept1 from alibaba where departmentName like "阿里集团-%" group by dept1 order by cnt desc;
```

```
+------+------------------------------------------+
| cnt  | dept1                                    |
+------+------------------------------------------+
| 1058 | 阿里集团-阿里云智能事业群                |
|  696 | 阿里集团-B类事业群                       |
|  655 | 阿里集团-新零售技术事业群                |
|  291 | 阿里集团-盒马                            |
|  287 | 阿里集团-淘宝事业群                      |
|  256 | 阿里集团-创新业务事业群                  |
|  233 | 阿里集团-大文娱事业群                    |
|  161 | 阿里集团-天猫事业群                      |
|  146 | 阿里集团-高德事业群                      |
|  114 | 阿里集团-CCO线                           |
|   98 | 阿里集团-CPO线                           |
|   95 | 阿里集团-CFO线                           |
|   88 | 阿里集团-CRO线                           |
|   71 | 阿里集团-阿里妈妈事业群                  |
|   58 | 阿里集团-天猫进出口事业群                |
|   57 | 阿里集团-天猫超市事业群                  |
|   46 | 阿里集团-后勤线                          |
|   40 | 阿里集团-法务线                          |
|   36 | 阿里集团-全球游及国际业务线              |
|   25 | 阿里集团-GR线                            |
|   10 | 阿里集团-PR线                            |
|    6 | 阿里集团-CMO线                           |
|    6 | 阿里集团-思过崖线                        |
|    6 | 阿里集团-集团管理线                      |
|    2 | 阿里集团-投资基金线                      |
+------+------------------------------------------+
```

看完各个部门的招聘人数，我们再按职位类别分析下。抓取的数据字段中有两个类别，一个是firstCategory，一个是secondCategory，我们先按firstCategory分析下。

```sql
select firstCategory,count(*) cnt from alibaba group by firstCategory order by cnt desc;
```

```
+------------------------------+------+
| firstCategory                | cnt  |
+------------------------------+------+
| 技术类                       | 2041 |
| 运营类                       | 1268 |
| 综合类                       |  906 |
| 产品类                       |  520 |
| 市场拓展                     |  430 |
| 销售类                       |  319 |
| 客服类                       |  179 |
| 设计类                       |  146 |
| 数据类                       |   99 |
| 游戏类                       |   87 |
| 金融类                       |   44 |
| Technology                   |   26 |
| 内容类                       |   24 |
| 项目管理                     |   18 |
| 地图数据                     |   12 |
| 外贸类                       |    7 |
| Commercial                   |    3 |
| Data & Business Intelligence |    2 |
| Product Management           |    1 |
| eCommerce Platform           |    1 |
+------------------------------+------+
```

还是技术类最多啊!

再看下根据两级分类的，两级分类就不直接按照职位数量排序了，先按firstCategory排序，再按数量倒序。

```sql
select firstCategory,secondCategory,count(*) cnt from alibaba group by firstCategory,secondCategory order by firstCategory, cnt desc;
```

```
+------------------------------+------------------------------------------+------+
| firstCategory                | secondCategory                           | cnt  |
+------------------------------+------------------------------------------+------+
| Commercial                   | Business Operations                      |    2 |
| Commercial                   | Marketing Solutions                      |    1 |
| Data & Business Intelligence | Performance & Data Analysis              |    2 |
| eCommerce Platform           | Seller Platform                          |    1 |
| Product Management           | Product Operation                        |    1 |
| Technology                   | Mobile Engineering(IOS & Android)        |    8 |
| Technology                   | Software Development(Backend & Frontend) |    6 |
| Technology                   | Data Science                             |    3 |
| Technology                   | Frontend Engineering                     |    2 |
| Technology                   | Backend Engineering                      |    2 |
| Technology                   | Program Management                       |    1 |
| Technology                   | Quality Assurance                        |    1 |
| Technology                   | Product                                  |    1 |
| Technology                   | UX/UI                                    |    1 |
| Technology                   | Technology Risk/Business Risk            |    1 |
| 产品类                       | 平台型                                   |  304 |
| 产品类                       | 用户型                                   |  123 |
| 产品类                       | 商业型                                   |   84 |
| 产品类                       | 综合管理                                 |    9 |
| 内容类                       | 制片人                                   |    8 |
| 内容类                       | 内容合作                                 |    8 |
| 内容类                       | 艺人培养                                 |    3 |
| 内容类                       | 内容评估                                 |    3 |
| 内容类                       | 文学策划                                 |    2 |
| 地图数据                     | 数据工艺                                 |   11 |
| 地图数据                     | 数据运营                                 |    1 |
| 外贸类                       | 通关                                     |    4 |
| 外贸类                       | 外汇及银行                               |    2 |
| 外贸类                       | 服务运营                                 |    1 |
| 客服类                       | 服务运营                                 |   60 |
| 客服类                       | 业务分析与运营                           |   48 |
| 客服类                       | 外包运营                                 |   16 |
| 客服类                       | 热线&在线                                |   13 |
| 客服类                       | 综合服务                                 |    8 |
| 客服类                       | 质量保证                                 |    7 |
| 客服类                       | 商家管理                                 |    6 |
| 客服类                       | 流程优化                                 |    6 |
| 客服类                       | 服务安全                                 |    3 |
| 客服类                       | 现场管理                                 |    3 |
| 客服类                       | 品质提升                                 |    2 |
| 客服类                       | 交易保障                                 |    2 |
| 客服类                       | 客户接待                                 |    2 |
| 客服类                       | 综合管理                                 |    1 |
| 客服类                       | 客户支持                                 |    1 |
| 客服类                       | 技术服务                                 |    1 |
| 市场拓展                     | BD                                       |  247 |
| 市场拓展                     | 市场                                     |  183 |
| 技术类                       | 开发                                     | 1021 |
| 技术类                       | 算法                                     |  288 |
| 技术类                       | 综合                                     |  233 |
| 技术类                       | 前端                                     |  144 |
| 技术类                       | 数据                                     |  125 |
| 技术类                       | 质量保证                                 |  123 |
| 技术类                       | 安全                                     |   58 |
| 技术类                       | 运维                                     |   37 |
| 技术类                       | 综合管理                                 |    8 |
| 技术类                       | 地图                                     |    4 |
| 数据类                       | 商业数据分析                             |   98 |
| 数据类                       | 综合管理                                 |    1 |
| 游戏类                       | 游戏美术                                 |   28 |
| 游戏类                       | 游戏开发                                 |   19 |
| 游戏类                       | 游戏运营                                 |   15 |
| 游戏类                       | 游戏策划                                 |   12 |
| 游戏类                       | 游戏测试                                 |    8 |
| 游戏类                       | 综合管理                                 |    3 |
| 游戏类                       | 产品管理                                 |    2 |
| 综合类                       | 财务及内控                               |  187 |
| 综合类                       | 人力资源                                 |  156 |
| 综合类                       | 采购                                     |  121 |
| 综合类                       | 公司事务                                 |  109 |
| 综合类                       | 物流                                     |   78 |
| 综合类                       | 法务                                     |   63 |
| 综合类                       | 工程建设                                 |   49 |
| 综合类                       | 其它                                     |   40 |
| 综合类                       | 行政                                     |   37 |
| 综合类                       | 综合管理                                 |   33 |
| 综合类                       | 培训                                     |   20 |
| 综合类                       | IT                                       |   13 |
| 设计类                       | 视觉                                     |   95 |
| 设计类                       | 交互                                     |   42 |
| 设计类                       | 用户体验与研究                           |    9 |
| 运营类                       | 内容运营                                 |  279 |
| 运营类                       | 产品运营                                 |  234 |
| 运营类                       | 行业运营                                 |  218 |
| 运营类                       | 商家运营                                 |  212 |
| 运营类                       | 运营综合                                 |  162 |
| 运营类                       | 频道/类目运营                            |   57 |
| 运营类                       | 规则管理                                 |   43 |
| 运营类                       | 安全运营                                 |   34 |
| 运营类                       | 综合管理                                 |   21 |
| 运营类                       | 无线产品运营                             |    3 |
| 运营类                       | 无线运营综合                             |    2 |
| 运营类                       | 现场娱乐运营                             |    2 |
| 运营类                       | 无线内容运营                             |    1 |
| 金融类                       | 风控                                     |   17 |
| 金融类                       | 结算服务                                 |    8 |
| 金融类                       | 资金管理                                 |    4 |
| 金融类                       | 业务发展                                 |    4 |
| 金融类                       | 决策科学                                 |    3 |
| 金融类                       | 催收                                     |    3 |
| 金融类                       | 反洗钱                                   |    3 |
| 金融类                       | 综合管理                                 |    2 |
| 销售类                       | 直销                                     |  135 |
| 销售类                       | 业务运营                                 |   87 |
| 销售类                       | 渠道管理                                 |   51 |
| 销售类                       | 运营                                     |   14 |
| 销售类                       | 业务支持                                 |    7 |
| 销售类                       | 销售策划                                 |    7 |
| 销售类                       | 电销                                     |    6 |
| 销售类                       | 综合管理                                 |    6 |
| 销售类                       | 资源管理                                 |    3 |
| 销售类                       | 在线销售                                 |    1 |
| 销售类                       | 产品运营                                 |    1 |
| 销售类                       | 外贸服务                                 |    1 |
| 项目管理                     | 业务项目管理                             |   18 |
+------------------------------+------------------------------------------+------+
```

根据workLocation字段我们可以分析出不同城市的招聘职位数。

```sql
select count(*) cnt,workLocation from alibaba group by workLocation order by cnt desc limit 20;
```

```
+------+---------------+
| cnt  | workLocation  |
+------+---------------+
| 3446 | 杭州          |
| 1021 | 北京          |
|  364 | 上海          |
|  193 | 广州          |
|  154 | 深圳          |
|   72 | 杭州,北京     |
|   51 | 北京,杭州     |
|   46 | 成都          |
|   41 | 杭州,上海     |
|   38 | 南京          |
|   38 | 武汉          |
|   33 | 西安          |
|   30 | 重庆          |
|   29 | 中国香港      |
|   24 | 厦门          |
|   23 | 青岛          |
|   19 | 福州          |
|   19 | 上海,杭州     |
|   15 | 济南          |
|   15 | 长沙          |
+------+---------------+
```

然后我们根据workExperience字段来看下不同工作经验要求的招聘职位数。

```sql
select count(*) cnt,workExperience from alibaba group by workExperience order by cnt desc;
```

```
+------+-----------------+
| cnt  | workExperience  |
+------+-----------------+
| 2754 | 五年以上        |
| 1961 | 三年以上        |
|  600 | 八年以上        |
|  164 | 七年以上        |
|  145 | 六年以上        |
|  138 | 二年以上        |
|  135 | 十年以上        |
|  134 | 四年以上        |
|   94 | 一年以上        |
|    4 | 应届毕业生      |
|    4 | 一年以下        |
+------+-----------------+
```

再根据degree字段分析下不同学历要求的招聘职位数。

```sql
select count(*) cnt,degree from alibaba group by degree order by cnt desc;
```

```
+------+--------+
| cnt  | degree |
+------+--------+
| 5898 | 本科   |
|  148 | 硕士   |
|   64 | 大专   |
|   19 | 博士   |
|    3 | 其它   |
|    1 | 高中   |
+------+--------+
```



