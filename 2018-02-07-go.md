# Goå…¥é—¨

## Goä»‹ç»

[éƒ¨è½å›¾é‰´ä¹‹Goï¼šçˆ¹å¥½è¿˜è¿™ä¹ˆåŠªåŠ›ï¼Ÿ](http://mp.weixin.qq.com/s/JLVJxEglxqelQtN33qlRNQ)

## ç¯å¢ƒé…ç½®

### å®‰è£…

- ä¸‹è½½æºç ç¼–è¯‘å®‰è£…
- ä¸‹è½½ç›¸åº”å¹³å°çš„å®‰è£…åŒ…å®‰è£… [ä¸‹è½½åœ°å€:https://golang.org/dl/](https://golang.org/dl/)
- Linuxä¸Šçš„`apt-get`,`yum`ï¼ŒMacä¸Šçš„`homebrew` å®‰è£…

å®‰è£…å®Œæˆåå‘½ä»¤è¡Œè¾“å…¥`go`ï¼Œå¦‚æœæ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯åˆ™å®‰è£…æˆåŠŸ

### GOPATH

GOPATHï¼šç”¨æ¥å­˜æ”¾ç”¨æˆ·çš„Goæºç ï¼ŒGoçš„å¯è¿è¡Œæ–‡ä»¶ï¼Œä»¥åŠç›¸åº”çš„ç¼–è¯‘ä¹‹åçš„åŒ…æ–‡ä»¶

- src å­˜æ”¾æºä»£ç ï¼Œä½¿ç”¨go getä¸‹è½½çš„ä»£ç ä¼šæ”¾åˆ°è¿™ä¸ªç›®å½•
- pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶ï¼ˆæ¯”å¦‚ï¼š.aï¼‰
- bin ç¼–è¯‘åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶

### goå‘½ä»¤å’Œå¸¸ç”¨å·¥å…·

![image.png](https://github.com/astaxie/build-web-application-with-golang/raw/master/zh/images/1.1.mac.png?raw=true)

go installï¼šç¼–è¯‘å¹¶æŠŠç¼–è¯‘å¥½çš„ç»“æœç§»åˆ°`$GOPATH/pkg`æˆ–è€…`$GOPATH/bin`
go build ï¼šç¼–è¯‘ï¼ˆé¡¹ç›®å’Œæ–‡ä»¶ï¼‰
å¸¸ç”¨å‚æ•°ï¼š
-o æŒ‡å®šè¾“å‡ºçš„æ–‡ä»¶åï¼Œå¯ä»¥å¸¦ä¸Šè·¯å¾„ï¼Œä¾‹å¦‚ go build -o out main.go
-i å®‰è£…ç›¸åº”çš„åŒ…ï¼Œç¼–è¯‘+go install
-v æ‰“å°å‡ºæ¥æˆ‘ä»¬æ­£åœ¨ç¼–è¯‘çš„åŒ…å

go getï¼šå®‰è£…ç¬¬ä¸‰æ–¹åŒ…
å¸¸ç”¨å‘½ä»¤ï¼š
-d åªä¸‹è½½ä¸å®‰è£…
-u å¼ºåˆ¶ä½¿ç”¨ç½‘ç»œå»æ›´æ–°åŒ…å’Œå®ƒçš„ä¾èµ–åŒ…
-v æ˜¾ç¤ºæ‰§è¡Œçš„å‘½ä»¤

go cleanï¼šç§»é™¤å½“å‰æºç åŒ…å’Œå…³è”æºç åŒ…é‡Œé¢ç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶

go fmtï¼šæ ¼å¼åŒ–ä»£ç 

godocï¼šæ–‡æ¡£
godoc -http=:ç«¯å£å· æ¯”å¦‚godoc -http=:8080ç„¶åæ‰“å¼€127.0.0.1:8080å¯ä»¥åœ¨æµè§ˆå™¨ä¸­æŸ¥è¯¢pkgæ–‡æ¡£
godoc net/httpï¼šæŸ¥çœ‹httpåŒ…çš„æ–‡æ¡£
godoc -src fmt Printfï¼šæŸ¥çœ‹fmt.Printfçš„ä»£ç 

go run ç¼–è¯‘å¹¶è¿è¡ŒGoç¨‹åº

### å¼€å‘å·¥å…·

ä¸ªäººå–œæ¬¢ç”¨vscodeï¼Œè£…ä¸ªæ’ä»¶å¯ä»¥å®ç°åŒ…è‡ªåŠ¨å¯¼å…¥ã€ä»£ç è‡ªåŠ¨æ ¼å¼åŒ–ã€é”™è¯¯æç¤ºç­‰åŠŸèƒ½

JetBrainsæœ€è¿‘åˆšå‡ºäº†ä¸€ä¸ªGoLand

## Goè¯­è¨€åŸºç¡€

### Hello,world

```go
package main

import "fmt"

func main() {
    fmt.Printf("Hello, world! ä½ å¥½ï¼Œä¸–ç•Œ ğŸ™‚\n")
}
```

è¾“å‡ºï¼šHello, world! ä½ å¥½ï¼Œä¸–ç•Œ ğŸ™‚

### åŸºç¡€ç±»å‹

#### å˜é‡

```go
// å®šä¹‰å˜é‡
var v1 int

// å®šä¹‰å¤šä¸ªå˜é‡
var v1, v2, v3 string

// å®šä¹‰å¤šä¸ªå˜é‡å¹¶èµ‹å€¼
var enabled, disabled = true, false

v1 := "go"
```

**goè¯­è¨€é‡Œå®šä¹‰çš„å˜é‡ã€å£°æ˜çš„åŒ…å¿…é¡»è¦ä½¿ç”¨ï¼Œå¦åˆ™ç¼–è¯‘ä¼šæŠ¥é”™ï¼›`_`è¿™ä¸ªå˜é‡æ¯”è¾ƒç‰¹æ®Šï¼Œä»»ä½•èµ‹äºˆå®ƒçš„å€¼éƒ½ä¼šè¢«ä¸¢å¼ƒ**


#### å¸¸é‡

`const Pi float32 = 3.1415926`

#### åŸºç¡€å†…ç½®ç±»å‹
1ã€Boolean
2ã€int, uint
GoåŒæ—¶æ”¯æŒintå’Œuintï¼Œè¿™ä¸¤ç§ç±»å‹çš„é•¿åº¦ç›¸åŒï¼Œä½†å…·ä½“é•¿åº¦å–å†³äºä¸åŒç¼–è¯‘å™¨çš„å®ç°ã€‚Goé‡Œé¢ä¹Ÿæœ‰ç›´æ¥å®šä¹‰å¥½ä½æ•°çš„ç±»å‹ï¼šrune, int8, int16, int32, int64å’Œbyte, uint8, uint16, uint32, uint64ã€‚å…¶ä¸­runeæ˜¯int32çš„åˆ«ç§°ï¼Œbyteæ˜¯uint8çš„åˆ«ç§°

3ã€float32, float64
æµ®ç‚¹æ•°çš„ç±»å‹æœ‰float32å’Œfloat64ä¸¤ç§ï¼ˆæ²¡æœ‰floatç±»å‹ï¼‰ï¼Œé»˜è®¤æ˜¯float64

4ã€string
Goä¸­çš„å­—ç¬¦ä¸²éƒ½æ˜¯é‡‡ç”¨UTF-8å­—ç¬¦é›†ç¼–ç ã€‚å­—ç¬¦ä¸²æ˜¯ç”¨ä¸€å¯¹åŒå¼•å·ï¼ˆ""ï¼‰æˆ–åå¼•å·``æ‹¬èµ·æ¥å®šä¹‰ï¼Œå®ƒçš„ç±»å‹æ˜¯string

5ã€error
Goå†…ç½®æœ‰ä¸€ä¸ªerrorç±»å‹ï¼Œä¸“é—¨ç”¨æ¥å¤„ç†é”™è¯¯ä¿¡æ¯ï¼ŒGoçš„packageé‡Œé¢è¿˜ä¸“é—¨æœ‰ä¸€ä¸ªåŒ…errorsæ¥å¤„ç†é”™è¯¯

6ã€complex
å¤æ•°ç±»å‹ã€‚å®ƒçš„é»˜è®¤ç±»å‹æ˜¯complex128ï¼ˆ64ä½å®æ•°+64ä½è™šæ•°ï¼‰ã€‚å¦‚æœéœ€è¦å°ä¸€äº›çš„ï¼Œä¹Ÿæœ‰complex64(32ä½å®æ•°+32ä½è™šæ•°)ã€‚å¤æ•°çš„å½¢å¼ä¸ºRE + IMiï¼Œå…¶ä¸­REæ˜¯å®æ•°éƒ¨åˆ†ï¼ŒIMæ˜¯è™šæ•°éƒ¨åˆ†ï¼Œè€Œæœ€åçš„iæ˜¯è™šæ•°å•ä½ã€‚

**åˆ†ç»„å£°æ˜:åœ¨Goè¯­è¨€ä¸­ï¼ŒåŒæ—¶å£°æ˜å¤šä¸ªå¸¸é‡ã€å˜é‡ï¼Œæˆ–è€…å¯¼å…¥å¤šä¸ªåŒ…æ—¶ï¼Œå¯é‡‡ç”¨åˆ†ç»„çš„æ–¹å¼è¿›è¡Œå£°æ˜ã€‚**

ä¾‹ï¼š

```go
import "fmt"
import "os"

const i = 100
const pi = 3.1415
const prefix = "Go_"

var i int
var pi float32
var prefix string
```

å¯ä»¥åˆ†ç»„å†™æˆå¦‚ä¸‹å½¢å¼ï¼š

```go
import(
    "fmt"
    "os"
)

const(
    i = 100
    pi = 3.1415
    prefix = "Go_"
)

var(
    i int
    pi float32
    prefix string
)
```

#### Goç¨‹åºè®¾è®¡çš„ä¸€äº›è§„åˆ™

Goä¹‹æ‰€ä»¥ä¼šé‚£ä¹ˆç®€æ´ï¼Œæ˜¯å› ä¸ºå®ƒæœ‰ä¸€äº›é»˜è®¤çš„è¡Œä¸ºï¼š
- å¤§å†™å­—æ¯å¼€å¤´çš„å˜é‡æ˜¯å¯å¯¼å‡ºçš„ï¼Œä¹Ÿå°±æ˜¯å…¶å®ƒåŒ…å¯ä»¥è¯»å–çš„ï¼Œæ˜¯å…¬æœ‰å˜é‡ï¼›å°å†™å­—æ¯å¼€å¤´çš„å°±æ˜¯ä¸å¯å¯¼å‡ºçš„ï¼Œæ˜¯ç§æœ‰å˜é‡ã€‚
- å¤§å†™å­—æ¯å¼€å¤´çš„å‡½æ•°ä¹Ÿæ˜¯ä¸€æ ·ï¼Œç›¸å½“äºclassä¸­çš„å¸¦publicå…³é”®è¯çš„å…¬æœ‰å‡½æ•°ï¼›å°å†™å­—æ¯å¼€å¤´çš„å°±æ˜¯æœ‰privateå…³é”®è¯çš„ç§æœ‰å‡½æ•°ã€‚

### æ•°ç»„ã€åˆ‡ç‰‡å’Œæ˜ å°„

#### æ•°ç»„

æ•°ç»„å£°æ˜

```go
var arr [10]int  // å£°æ˜äº†ä¸€ä¸ªintç±»å‹çš„æ•°ç»„
arr[0] = 42      // æ•°ç»„ä¸‹æ ‡æ˜¯ä»0å¼€å§‹çš„
arr[1] = 13      // èµ‹å€¼æ“ä½œ
fmt.Printf("The first element is %d\n", arr[0])  // è·å–æ•°æ®ï¼Œè¿”å›42
fmt.Printf("The last element is %d\n", arr[9]) //è¿”å›æœªèµ‹å€¼çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œé»˜è®¤è¿”å›0
```

å£°æ˜å¹¶èµ‹å€¼
```go
a := [3]int{1, 2, 3} // å£°æ˜äº†ä¸€ä¸ªé•¿åº¦ä¸º3çš„intæ•°ç»„
b := [10]int{1, 2, 3} // å£°æ˜äº†ä¸€ä¸ªé•¿åº¦ä¸º10çš„intæ•°ç»„ï¼Œå…¶ä¸­å‰ä¸‰ä¸ªå…ƒç´ åˆå§‹åŒ–ä¸º1ã€2ã€3ï¼Œå…¶å®ƒé»˜è®¤ä¸º0
c := [...]int{4, 5, 6} // å¯ä»¥çœç•¥é•¿åº¦è€Œé‡‡ç”¨`...`çš„æ–¹å¼ï¼ŒGoä¼šè‡ªåŠ¨æ ¹æ®å…ƒç´ ä¸ªæ•°æ¥è®¡ç®—é•¿åº¦
```

äºŒç»´æ•°ç»„
```go
// å£°æ˜äº†ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œè¯¥æ•°ç»„ä»¥ä¸¤ä¸ªæ•°ç»„ä½œä¸ºå…ƒç´ ï¼Œå…¶ä¸­æ¯ä¸ªæ•°ç»„ä¸­åˆæœ‰4ä¸ªintç±»å‹çš„å…ƒç´ 
doubleArray := [2][4]int{[4]int{1, 2, 3, 4}, [4]int{5, 6, 7, 8}}

```

#### åˆ‡ç‰‡

> åœ¨å¾ˆå¤šåº”ç”¨åœºæ™¯ä¸­ï¼Œæ•°ç»„å¹¶ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚åœ¨åˆå§‹å®šä¹‰æ•°ç»„æ—¶ï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“éœ€è¦å¤šå¤§çš„æ•°ç»„ï¼Œå› æ­¤æˆ‘ä»¬å°±éœ€è¦â€œåŠ¨æ€æ•°ç»„â€ã€‚
sliceå¹¶ä¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„åŠ¨æ€æ•°ç»„ï¼Œè€Œæ˜¯ä¸€ä¸ªå¼•ç”¨ç±»å‹ã€‚sliceæ€»æ˜¯æŒ‡å‘ä¸€ä¸ªåº•å±‚arrayï¼Œsliceçš„å£°æ˜ä¹Ÿå¯ä»¥åƒarrayä¸€æ ·ï¼Œåªæ˜¯ä¸éœ€è¦é•¿åº¦ã€‚

å£°æ˜ï¼š
```go
// å’Œå£°æ˜arrayä¸€æ ·ï¼Œåªæ˜¯å°‘äº†é•¿åº¦
var fslice []int

// å£°æ˜å¹¶èµ‹å€¼
slice := []byte {'a', 'b', 'c', 'd'}

// å£°æ˜ä¸€ä¸ªå«æœ‰10ä¸ªå…ƒç´ å…ƒç´ ç±»å‹ä¸ºbyteçš„æ•°ç»„
var ar = [10]byte {'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j'}

// å£°æ˜ä¸¤ä¸ªå«æœ‰byteçš„slice
var a, b []byte

// aæŒ‡å‘æ•°ç»„çš„ç¬¬3ä¸ªå…ƒç´ å¼€å§‹ï¼Œå¹¶åˆ°ç¬¬äº”ä¸ªå…ƒç´ ç»“æŸï¼Œ
a = ar[2:5]
//ç°åœ¨aå«æœ‰çš„å…ƒç´ : ar[2]ã€ar[3]å’Œar[4]

// bæ˜¯æ•°ç»„arçš„å¦ä¸€ä¸ªslice
b = ar[3:5]
// bçš„å…ƒç´ æ˜¯ï¼šar[3]å’Œar[4]
```

ä»Go1.2å¼€å§‹sliceæ”¯æŒäº†ä¸‰ä¸ªå‚æ•°çš„sliceï¼Œä¹‹å‰æˆ‘ä»¬ä¸€ç›´é‡‡ç”¨è¿™ç§æ–¹å¼åœ¨sliceæˆ–è€…arrayåŸºç¡€ä¸Šæ¥è·å–ä¸€ä¸ªslice

```go
var array [10]int
slice := array[2:4]

// é‡Œé¢sliceçš„å®¹é‡æ˜¯8ï¼Œæ–°ç‰ˆæœ¬é‡Œé¢å¯ä»¥æŒ‡å®šè¿™ä¸ªå®¹é‡
slice = array[2:4:7]
```

ä¹Ÿå¯ä»¥ç”¨makeåˆ›å»ºä¸€ä¸ªslice

```go
var s = make([]int, 5)  //é•¿åº¦æ˜¯5ï¼Œå®¹é‡æ˜¯5
var s = make([]int, 5, 10)  //é•¿åº¦æ˜¯5ï¼Œå®¹é‡æ˜¯10
```

![åˆ‡ç‰‡å’Œæ•°ç»„](https://github.com/astaxie/build-web-application-with-golang/blob/master/zh/images/2.2.slice.png?raw=true)

å¯¹äºsliceæœ‰å‡ ä¸ªæœ‰ç”¨çš„å†…ç½®å‡½æ•°ï¼š

- len è·å–sliceçš„é•¿åº¦
- cap è·å–sliceçš„æœ€å¤§å®¹é‡
- append å‘sliceé‡Œé¢è¿½åŠ ä¸€ä¸ªæˆ–è€…å¤šä¸ªå…ƒç´ ï¼Œç„¶åè¿”å›ä¸€ä¸ªå’Œsliceä¸€æ ·ç±»å‹çš„slice
- copy å‡½æ•°copyä»æºsliceçš„srcä¸­å¤åˆ¶å…ƒç´ åˆ°ç›®æ ‡dstï¼Œå¹¶ä¸”è¿”å›å¤åˆ¶çš„å…ƒç´ çš„ä¸ªæ•°

**sliceæ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‰€ä»¥å½“å¼•ç”¨æ”¹å˜å…¶ä¸­å…ƒç´ çš„å€¼æ—¶ï¼Œå…¶å®ƒçš„æ‰€æœ‰å¼•ç”¨éƒ½ä¼šæ”¹å˜è¯¥å€¼ï¼Œä¾‹å¦‚ä¸Šé¢çš„aSliceå’ŒbSliceï¼Œå¦‚æœä¿®æ”¹äº†aSliceä¸­å…ƒç´ çš„å€¼ï¼Œé‚£ä¹ˆbSliceç›¸å¯¹åº”çš„å€¼ä¹Ÿä¼šæ”¹å˜ã€‚**

ä»æ¦‚å¿µä¸Šé¢æ¥è¯´sliceåƒä¸€ä¸ªç»“æ„ä½“ï¼Œè¿™ä¸ªç»“æ„ä½“åŒ…å«äº†ä¸‰ä¸ªå…ƒç´ ï¼š

- ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘æ•°ç»„ä¸­sliceæŒ‡å®šçš„å¼€å§‹ä½ç½®
- é•¿åº¦ï¼Œå³sliceçš„é•¿åº¦
- æœ€å¤§é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯sliceå¼€å§‹ä½ç½®åˆ°æ•°ç»„çš„æœ€åä½ç½®çš„é•¿åº¦

#### æ˜ å°„(map)

mapä¹Ÿå°±æ˜¯Pythonä¸­å­—å…¸çš„æ¦‚å¿µï¼Œå®ƒçš„æ ¼å¼ä¸ºmap[keyType]valueType

æˆ‘ä»¬çœ‹ä¸‹é¢çš„ä»£ç ï¼Œmapçš„è¯»å–å’Œè®¾ç½®ä¹Ÿç±»ä¼¼sliceä¸€æ ·ï¼Œé€šè¿‡keyæ¥æ“ä½œï¼Œåªæ˜¯sliceçš„indexåªèƒ½æ˜¯ï½€intï½€ç±»å‹ï¼Œè€Œmapå¤šäº†å¾ˆå¤šç±»å‹ï¼Œå¯ä»¥æ˜¯intï¼Œå¯ä»¥æ˜¯stringåŠæ‰€æœ‰å®Œå…¨å®šä¹‰äº†==ä¸!=æ“ä½œçš„ç±»å‹ã€‚æ¯”å¦‚ bool, æ•°å­—ï¼Œstring, æŒ‡é’ˆ, channel, è¿˜æœ‰ åªåŒ…å«å‰é¢å‡ ä¸ªç±»å‹çš„ interface types, structs, arrays

```go
// å£°æ˜ä¸€ä¸ªkeyæ˜¯å­—ç¬¦ä¸²ï¼Œå€¼ä¸ºintçš„å­—å…¸,è¿™ç§æ–¹å¼çš„å£°æ˜éœ€è¦åœ¨ä½¿ç”¨ä¹‹å‰ä½¿ç”¨makeåˆå§‹åŒ–
var numbers map[string]int
// å¦ä¸€ç§mapçš„å£°æ˜æ–¹å¼
numbers = make(map[string]int)
numbers["one"] = 1  //èµ‹å€¼
numbers["ten"] = 10 //èµ‹å€¼
numbers["three"] = 3

fmt.Println("ç¬¬ä¸‰ä¸ªæ•°å­—æ˜¯: ", numbers["three"]) // è¯»å–æ•°æ®
// æ‰“å°å‡ºæ¥å¦‚:ç¬¬ä¸‰ä¸ªæ•°å­—æ˜¯: 3
```

ä½¿ç”¨mapè¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„çš„å‡ ç‚¹ï¼š
- mapæ˜¯æ— åºçš„ï¼Œæ¯æ¬¡æ‰“å°å‡ºæ¥çš„mapéƒ½ä¼šä¸ä¸€æ ·ï¼Œå®ƒä¸èƒ½é€šè¿‡indexè·å–ï¼Œè€Œå¿…é¡»é€šè¿‡keyè·å–
- mapçš„é•¿åº¦æ˜¯ä¸å›ºå®šçš„ï¼Œä¹Ÿå°±æ˜¯å’Œsliceä¸€æ ·ï¼Œä¹Ÿæ˜¯ä¸€ç§å¼•ç”¨ç±»å‹
- å†…ç½®çš„lenå‡½æ•°åŒæ ·é€‚ç”¨äºmapï¼Œè¿”å›mapæ‹¥æœ‰çš„keyçš„æ•°é‡
- mapçš„å€¼å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä¿®æ”¹ï¼Œé€šè¿‡numbers["one"]=11å¯ä»¥å¾ˆå®¹æ˜“çš„æŠŠkeyä¸ºoneçš„å­—å…¸å€¼æ”¹ä¸º11
- mapå’Œå…¶ä»–åŸºæœ¬å‹åˆ«ä¸åŒï¼Œå®ƒä¸æ˜¯thread-safeï¼Œåœ¨å¤šä¸ªgo-routineå­˜å–æ—¶ï¼Œå¿…é¡»ä½¿ç”¨mutex lockæœºåˆ¶

mapä¹Ÿæ˜¯ä¸€ç§å¼•ç”¨ç±»å‹ï¼Œå¦‚æœä¸¤ä¸ªmapåŒæ—¶æŒ‡å‘ä¸€ä¸ªåº•å±‚ï¼Œé‚£ä¹ˆä¸€ä¸ªæ”¹å˜ï¼Œå¦ä¸€ä¸ªä¹Ÿç›¸åº”çš„æ”¹å˜ï¼š

```go
m := make(map[string]string)
m["Hello"] = "Bonjour"
m1 := m
m1["Hello"] = "Salut"  // ç°åœ¨m["hello"]çš„å€¼å·²ç»æ˜¯Salutäº†
```

makeã€newæ“ä½œ
makeç”¨äºå†…å»ºç±»å‹ï¼ˆmapã€slice å’Œchannelï¼‰çš„å†…å­˜åˆ†é…ã€‚newç”¨äºå„ç§ç±»å‹çš„å†…å­˜åˆ†é…ã€‚

å†…å»ºå‡½æ•°newæœ¬è´¨ä¸Šè¯´è·Ÿå…¶å®ƒè¯­è¨€ä¸­çš„åŒåå‡½æ•°åŠŸèƒ½ä¸€æ ·ï¼šnew(T)åˆ†é…äº†é›¶å€¼å¡«å……çš„Tç±»å‹çš„å†…å­˜ç©ºé—´ï¼Œå¹¶ä¸”è¿”å›å…¶åœ°å€ï¼Œå³ä¸€ä¸ª*Tç±»å‹çš„å€¼ã€‚ç”¨Goçš„æœ¯è¯­è¯´ï¼Œå®ƒè¿”å›äº†ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘æ–°åˆ†é…çš„ç±»å‹Tçš„é›¶å€¼ã€‚æœ‰ä¸€ç‚¹éå¸¸é‡è¦ï¼š

> newè¿”å›æŒ‡é’ˆã€‚

å†…å»ºå‡½æ•°make(T, args)ä¸new(T)æœ‰ç€ä¸åŒçš„åŠŸèƒ½ï¼Œmakeåªèƒ½åˆ›å»ºsliceã€mapå’Œchannelï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªæœ‰åˆå§‹å€¼(éé›¶)çš„Tç±»å‹ï¼Œè€Œä¸æ˜¯*Tã€‚æœ¬è´¨æ¥è®²ï¼Œå¯¼è‡´è¿™ä¸‰ä¸ªç±»å‹æœ‰æ‰€ä¸åŒçš„åŸå› æ˜¯æŒ‡å‘æ•°æ®ç»“æ„çš„å¼•ç”¨åœ¨ä½¿ç”¨å‰å¿…é¡»è¢«åˆå§‹åŒ–ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªsliceï¼Œæ˜¯ä¸€ä¸ªåŒ…å«æŒ‡å‘æ•°æ®ï¼ˆå†…éƒ¨arrayï¼‰çš„æŒ‡é’ˆã€é•¿åº¦å’Œå®¹é‡çš„ä¸‰é¡¹æè¿°ç¬¦ï¼›åœ¨è¿™äº›é¡¹ç›®è¢«åˆå§‹åŒ–ä¹‹å‰ï¼Œsliceä¸ºnilã€‚å¯¹äºsliceã€mapå’Œchannelæ¥è¯´ï¼Œmakeåˆå§‹åŒ–äº†å†…éƒ¨çš„æ•°æ®ç»“æ„ï¼Œå¡«å……é€‚å½“çš„å€¼ã€‚

> makeè¿”å›åˆå§‹åŒ–åçš„ï¼ˆéé›¶ï¼‰å€¼ã€‚

é›¶å€¼(é»˜è®¤å€¼)
> å…³äºâ€œé›¶å€¼â€ï¼Œæ‰€æŒ‡å¹¶éæ˜¯ç©ºå€¼ï¼Œè€Œæ˜¯ä¸€ç§â€œå˜é‡æœªå¡«å……å‰â€çš„é»˜è®¤å€¼ï¼Œé€šå¸¸ä¸º0ã€‚ æ­¤å¤„ç½—åˆ— éƒ¨åˆ†ç±»å‹ çš„ â€œé›¶å€¼â€

```go
int     0
int8    0
int32   0
int64   0
uint    0x0
rune    0 //runeçš„å®é™…ç±»å‹æ˜¯ int32
byte    0x0 // byteçš„å®é™…ç±»å‹æ˜¯ uint8
float32 0 //é•¿åº¦ä¸º 4 byte
float64 0 //é•¿åº¦ä¸º 8 byte
bool    false
string  ""
```


### æµç¨‹å’Œå‡½æ•°

#### if

Goé‡Œé¢ifæ¡ä»¶åˆ¤æ–­è¯­å¥ä¸­ä¸éœ€è¦æ‹¬å·ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤º

```go
if x > 10 {
    fmt.Println("x is greater than 10")
} else {
    fmt.Println("x is less than 10")
}
```

Goçš„ifè¿˜æœ‰ä¸€ä¸ªå¼ºå¤§çš„åœ°æ–¹å°±æ˜¯æ¡ä»¶åˆ¤æ–­è¯­å¥é‡Œé¢å…è®¸å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œè¿™ä¸ªå˜é‡çš„ä½œç”¨åŸŸåªèƒ½åœ¨è¯¥æ¡ä»¶é€»è¾‘å—å†…ï¼Œå…¶ä»–åœ°æ–¹å°±ä¸èµ·ä½œç”¨äº†ï¼Œå¦‚ä¸‹æ‰€ç¤º

```go
// è®¡ç®—è·å–å€¼x,ç„¶åæ ¹æ®xè¿”å›çš„å¤§å°ï¼Œåˆ¤æ–­æ˜¯å¦å¤§äº10ã€‚
if x := computedValue(); x > 10 {
    fmt.Println("x is greater than 10")
} else {
    fmt.Println("x is less than 10")
}

//è¿™ä¸ªåœ°æ–¹å¦‚æœè¿™æ ·è°ƒç”¨å°±ç¼–è¯‘å‡ºé”™äº†ï¼Œå› ä¸ºxæ˜¯æ¡ä»¶é‡Œé¢çš„å˜é‡
fmt.Println(x)
```

å¤šä¸ªæ¡ä»¶çš„æ—¶å€™å¦‚ä¸‹æ‰€ç¤ºï¼š

```go
if integer == 3 {
    fmt.Println("The integer is equal to 3")
} else if integer < 3 {
    fmt.Println("The integer is less than 3")
} else {
    fmt.Println("The integer is greater than 3")
}
```

#### for

**goè¯­è¨€é‡Œæ²¡æœ‰whileï¼Œå¯ä»¥ç”¨forå®ç°whileçš„åŠŸèƒ½**

forå¾ªç¯çš„è¯­æ³•ï¼š

```go
for expression1; expression2; expression3 {
    //...
}
```

forå¾ªç¯ä¾‹å­ï¼š

```go
package main

import "fmt"

func main(){
    sum := 0;
    for index:=0; index < 10 ; index++ {
        sum += index
    }
    fmt.Println("sum is equal to ", sum)
}
// è¾“å‡ºï¼šsum is equal to 45
```

æœ‰äº›æ—¶å€™å¦‚æœæˆ‘ä»¬å¿½ç•¥expression1å’Œexpression3ï¼š

```go
sum := 1
for ; sum < 1000;  {
    sum += sum
}
```

å…¶ä¸­;ä¹Ÿå¯ä»¥çœç•¥ï¼Œé‚£ä¹ˆå°±å˜æˆå¦‚ä¸‹çš„ä»£ç äº†ï¼Œæ˜¯ä¸æ˜¯ä¼¼æ›¾ç›¸è¯†ï¼Ÿå¯¹ï¼Œè¿™å°±æ˜¯whileçš„åŠŸèƒ½ã€‚

```go
sum := 1
for sum < 1000 {
    sum += sum
}
```

åœ¨å¾ªç¯é‡Œé¢æœ‰ä¸¤ä¸ªå…³é”®æ“ä½œbreakå’Œcontinue	,breakæ“ä½œæ˜¯è·³å‡ºå½“å‰å¾ªç¯ï¼Œcontinueæ˜¯è·³è¿‡æœ¬æ¬¡å¾ªç¯ã€‚å½“åµŒå¥—è¿‡æ·±çš„æ—¶å€™ï¼Œbreakå¯ä»¥é…åˆæ ‡ç­¾ä½¿ç”¨ï¼Œå³è·³è½¬è‡³æ ‡ç­¾æ‰€æŒ‡å®šçš„ä½ç½®ï¼Œè¯¦ç»†å‚è€ƒå¦‚ä¸‹ä¾‹å­ï¼š

```go
for index := 10; index>0; index-- {
    if index == 5{
        break // æˆ–è€…continue
    }
    fmt.Println(index)
}
// breakæ‰“å°å‡ºæ¥10ã€9ã€8ã€7ã€6
// continueæ‰“å°å‡ºæ¥10ã€9ã€8ã€7ã€6ã€4ã€3ã€2ã€1
```

breakå’Œcontinueè¿˜å¯ä»¥è·Ÿç€æ ‡å·ï¼Œç”¨æ¥è·³åˆ°å¤šé‡å¾ªç¯ä¸­çš„å¤–å±‚å¾ªç¯

foré…åˆrangeå¯ä»¥ç”¨äºè¯»å–sliceå’Œmapçš„æ•°æ®ï¼š

```go
for k,v:=range map {
    fmt.Println("map's key:",k)
    fmt.Println("map's val:",v)
}
```

ç”±äº Go æ”¯æŒ â€œå¤šå€¼è¿”å›â€, è€Œå¯¹äºâ€œå£°æ˜è€Œæœªè¢«è°ƒç”¨â€çš„å˜é‡, ç¼–è¯‘å™¨ä¼šæŠ¥é”™, åœ¨è¿™ç§æƒ…å†µä¸‹, å¯ä»¥ä½¿ç”¨_æ¥ä¸¢å¼ƒä¸éœ€è¦çš„è¿”å›å€¼ ä¾‹å¦‚:

```go
for _, v := range map{
    fmt.Println("map's val:", v)
}
```

#### swich

```go
i := 10
switch i {
case 1:
    fmt.Println("i is equal to 1")
case 2, 3, 4:
    fmt.Println("i is equal to 2, 3 or 4")
case 10:
    fmt.Println("i is equal to 10")
default:
    fmt.Println("All I know is that i is an integer")
}
```

Goé‡Œé¢switché»˜è®¤ç›¸å½“äºæ¯ä¸ªcaseæœ€åå¸¦æœ‰breakï¼ŒåŒ¹é…æˆåŠŸåä¸ä¼šè‡ªåŠ¨å‘ä¸‹æ‰§è¡Œå…¶ä»–caseï¼Œè€Œæ˜¯è·³å‡ºæ•´ä¸ªswitch, ä½†æ˜¯å¯ä»¥ä½¿ç”¨fallthroughå¼ºåˆ¶æ‰§è¡Œåé¢çš„caseä»£ç ã€‚

```go
integer := 6
switch integer {
case 4:
    fmt.Println("The integer was <= 4")
    fallthrough
case 5:
    fmt.Println("The integer was <= 5")
    fallthrough
default:
    fmt.Println("default case")
}
```

#### å‡½æ•°

å‡½æ•°é€šè¿‡å…³é”®å­—funcæ¥å£°æ˜ï¼š

```go
func funcName(input1 type1, input2 type2) (output1 type1, output2 type2) {
    //è¿™é‡Œæ˜¯å¤„ç†é€»è¾‘ä»£ç 
    //è¿”å›å¤šä¸ªå€¼
    return value1, value2
}
```

å˜å‚
Goå‡½æ•°æ”¯æŒå˜å‚ã€‚æ¥å—å˜å‚çš„å‡½æ•°æ˜¯æœ‰ç€ä¸å®šæ•°é‡çš„å‚æ•°çš„ã€‚ä¸ºäº†åšåˆ°è¿™ç‚¹ï¼Œé¦–å…ˆéœ€è¦å®šä¹‰å‡½æ•°ä½¿å…¶æ¥å—å˜å‚ï¼š

`func myfunc(arg ...int) {}`

arg ...intå‘Šè¯‰Goè¿™ä¸ªå‡½æ•°æ¥å—ä¸å®šæ•°é‡çš„å‚æ•°ã€‚æ³¨æ„ï¼Œè¿™äº›å‚æ•°çš„ç±»å‹å…¨éƒ¨æ˜¯intã€‚åœ¨å‡½æ•°ä½“ä¸­ï¼Œå˜é‡argæ˜¯ä¸€ä¸ªintçš„sliceï¼š

```go
for _, n := range arg {
    fmt.Printf("And the number is: %d\n", n)
}
```

ä¼ å€¼ä¸ä¼ æŒ‡é’ˆ

**å½“æˆ‘ä»¬ä¼ ä¸€ä¸ªå‚æ•°å€¼åˆ°è¢«è°ƒç”¨å‡½æ•°é‡Œé¢æ—¶ï¼Œå®é™…ä¸Šæ˜¯ä¼ äº†è¿™ä¸ªå€¼çš„ä¸€ä»½copyï¼Œå½“åœ¨è¢«è°ƒç”¨å‡½æ•°ä¸­ä¿®æ”¹å‚æ•°å€¼çš„æ—¶å€™ï¼Œè°ƒç”¨å‡½æ•°ä¸­ç›¸åº”å®å‚ä¸ä¼šå‘ç”Ÿä»»ä½•å˜åŒ–ï¼Œå› ä¸ºæ•°å€¼å˜åŒ–åªä½œç”¨åœ¨copyä¸Šã€‚å¦‚æœæƒ³è¦åœ¨å‡½æ•°ä¸­ä¿®æ”¹ä¼ å…¥çš„å‚æ•°ï¼Œå°±è¦ä¼ å…¥åœ°å€**

defer

Goè¯­è¨€ä¸­æœ‰ç§ä¸é”™çš„è®¾è®¡ï¼Œå³å»¶è¿Ÿï¼ˆdeferï¼‰è¯­å¥ï¼Œä½ å¯ä»¥åœ¨å‡½æ•°ä¸­æ·»åŠ å¤šä¸ªdeferè¯­å¥ã€‚å½“å‡½æ•°æ‰§è¡Œåˆ°æœ€åæ—¶ï¼Œ**è¿™äº›deferè¯­å¥ä¼šæŒ‰ç…§é€†åºæ‰§è¡Œ**ï¼Œæœ€åè¯¥å‡½æ•°è¿”å›ã€‚ç‰¹åˆ«æ˜¯å½“ä½ åœ¨è¿›è¡Œä¸€äº›æ‰“å¼€èµ„æºçš„æ“ä½œæ—¶ï¼Œé‡åˆ°é”™è¯¯éœ€è¦æå‰è¿”å›ï¼Œåœ¨è¿”å›å‰ä½ éœ€è¦å…³é—­ç›¸åº”çš„èµ„æºï¼Œä¸ç„¶å¾ˆå®¹æ˜“é€ æˆèµ„æºæ³„éœ²ç­‰é—®é¢˜ã€‚å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š

```go
func ReadWrite() bool {
    file.Open("file")
    defer file.Close()
    if failureX {
        return false
    }
    if failureY {
        return false
    }
    return true
}
```

å¦‚æœæœ‰å¾ˆå¤šè°ƒç”¨deferï¼Œé‚£ä¹ˆdeferæ˜¯é‡‡ç”¨åè¿›å…ˆå‡ºæ¨¡å¼ï¼Œæ‰€ä»¥å¦‚ä¸‹ä»£ç ä¼šè¾“å‡º4 3 2 1 0

```go
for i := 0; i < 5; i++ {
	defer fmt.Printf("%d ", i)
}
```

Panicå’ŒRecover
Goæ²¡æœ‰åƒJavaé‚£æ ·çš„å¼‚å¸¸æœºåˆ¶ï¼Œå®ƒä¸èƒ½æŠ›å‡ºå¼‚å¸¸ï¼Œè€Œæ˜¯ä½¿ç”¨äº†panicå’Œrecoveræœºåˆ¶ã€‚ä¸€å®šè¦è®°ä½ï¼Œä½ åº”å½“æŠŠå®ƒä½œä¸ºæœ€åçš„æ‰‹æ®µæ¥ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ çš„ä»£ç ä¸­åº”å½“æ²¡æœ‰ï¼Œæˆ–è€…å¾ˆå°‘æœ‰panicçš„ä¸œè¥¿ã€‚è¿™æ˜¯ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œè¯·æ˜æ™ºåœ°ä½¿ç”¨å®ƒã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•ä½¿ç”¨å®ƒå‘¢ï¼Ÿ

Panic

æ˜¯ä¸€ä¸ªå†…å»ºå‡½æ•°ï¼Œå¯ä»¥ä¸­æ–­åŸæœ‰çš„æ§åˆ¶æµç¨‹ï¼Œè¿›å…¥ä¸€ä¸ªä»¤äººææ…Œçš„æµç¨‹ä¸­ã€‚å½“å‡½æ•°Fè°ƒç”¨panicï¼Œå‡½æ•°Fçš„æ‰§è¡Œè¢«ä¸­æ–­ï¼Œä½†æ˜¯Fä¸­çš„å»¶è¿Ÿå‡½æ•°ä¼šæ­£å¸¸æ‰§è¡Œï¼Œç„¶åFè¿”å›åˆ°è°ƒç”¨å®ƒçš„åœ°æ–¹ã€‚åœ¨è°ƒç”¨çš„åœ°æ–¹ï¼ŒFçš„è¡Œä¸ºå°±åƒè°ƒç”¨äº†panicã€‚è¿™ä¸€è¿‡ç¨‹ç»§ç»­å‘ä¸Šï¼Œç›´åˆ°å‘ç”Ÿpanicçš„goroutineä¸­æ‰€æœ‰è°ƒç”¨çš„å‡½æ•°è¿”å›ï¼Œæ­¤æ—¶ç¨‹åºé€€å‡ºã€‚ææ…Œå¯ä»¥ç›´æ¥è°ƒç”¨panicäº§ç”Ÿã€‚ä¹Ÿå¯ä»¥ç”±è¿è¡Œæ—¶é”™è¯¯äº§ç”Ÿï¼Œä¾‹å¦‚è®¿é—®è¶Šç•Œçš„æ•°ç»„ã€‚

Recover

æ˜¯ä¸€ä¸ªå†…å»ºçš„å‡½æ•°ï¼Œå¯ä»¥è®©è¿›å…¥ä»¤äººææ…Œçš„æµç¨‹ä¸­çš„goroutineæ¢å¤è¿‡æ¥ã€‚recoverä»…åœ¨å»¶è¿Ÿå‡½æ•°ä¸­æœ‰æ•ˆã€‚åœ¨æ­£å¸¸çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè°ƒç”¨recoverä¼šè¿”å›nilï¼Œå¹¶ä¸”æ²¡æœ‰å…¶å®ƒä»»ä½•æ•ˆæœã€‚å¦‚æœå½“å‰çš„goroutineé™·å…¥ææ…Œï¼Œè°ƒç”¨recoverå¯ä»¥æ•è·åˆ°panicçš„è¾“å…¥å€¼ï¼Œå¹¶ä¸”æ¢å¤æ­£å¸¸çš„æ‰§è¡Œã€‚

ä¸‹é¢è¿™ä¸ªå‡½æ•°æ¼”ç¤ºäº†å¦‚ä½•åœ¨è¿‡ç¨‹ä¸­ä½¿ç”¨panic

```go
var user = os.Getenv("USER")

func init() {
    if user == "" {
        panic("no value for $USER")
    }
}
```

ä¸‹é¢è¿™ä¸ªå‡½æ•°æ£€æŸ¥ä½œä¸ºå…¶å‚æ•°çš„å‡½æ•°åœ¨æ‰§è¡Œæ—¶æ˜¯å¦ä¼šäº§ç”Ÿpanicï¼š

```go
func throwsPanic(f func()) (b bool) {
    defer func() {
        if x := recover(); x != nil {
            b = true
        }
    }()
    f() //æ‰§è¡Œå‡½æ•°fï¼Œå¦‚æœfä¸­å‡ºç°äº†panicï¼Œé‚£ä¹ˆå°±å¯ä»¥æ¢å¤å›æ¥
    return
}
```

mainå‡½æ•°å’Œinitå‡½æ•°

> Goé‡Œé¢æœ‰ä¸¤ä¸ªä¿ç•™çš„å‡½æ•°ï¼šinitå‡½æ•°ï¼ˆèƒ½å¤Ÿåº”ç”¨äºæ‰€æœ‰çš„packageï¼‰å’Œmainå‡½æ•°ï¼ˆåªèƒ½åº”ç”¨äºpackage mainï¼‰ã€‚è¿™ä¸¤ä¸ªå‡½æ•°åœ¨å®šä¹‰æ—¶ä¸èƒ½æœ‰ä»»ä½•çš„å‚æ•°å’Œè¿”å›å€¼ã€‚è™½ç„¶ä¸€ä¸ªpackageé‡Œé¢å¯ä»¥å†™ä»»æ„å¤šä¸ªinitå‡½æ•°ï¼Œä½†è¿™æ— è®ºæ˜¯å¯¹äºå¯è¯»æ€§è¿˜æ˜¯ä»¥åçš„å¯ç»´æŠ¤æ€§æ¥è¯´ï¼Œæˆ‘ä»¬éƒ½å¼ºçƒˆå»ºè®®ç”¨æˆ·åœ¨ä¸€ä¸ªpackageä¸­æ¯ä¸ªæ–‡ä»¶åªå†™ä¸€ä¸ªinitå‡½æ•°ã€‚
ç¨‹åºçš„åˆå§‹åŒ–å’Œæ‰§è¡Œéƒ½èµ·å§‹äºmainåŒ…ã€‚å¦‚æœmainåŒ…è¿˜å¯¼å…¥äº†å…¶å®ƒçš„åŒ…ï¼Œé‚£ä¹ˆå°±ä¼šåœ¨ç¼–è¯‘æ—¶å°†å®ƒä»¬ä¾æ¬¡å¯¼å…¥ã€‚æœ‰æ—¶ä¸€ä¸ªåŒ…ä¼šè¢«å¤šä¸ªåŒ…åŒæ—¶å¯¼å…¥ï¼Œé‚£ä¹ˆå®ƒåªä¼šè¢«å¯¼å…¥ä¸€æ¬¡ï¼ˆä¾‹å¦‚å¾ˆå¤šåŒ…å¯èƒ½éƒ½ä¼šç”¨åˆ°fmtåŒ…ï¼Œä½†å®ƒåªä¼šè¢«å¯¼å…¥ä¸€æ¬¡ï¼Œå› ä¸ºæ²¡æœ‰å¿…è¦å¯¼å…¥å¤šæ¬¡ï¼‰ã€‚å½“ä¸€ä¸ªåŒ…è¢«å¯¼å…¥æ—¶ï¼Œå¦‚æœè¯¥åŒ…è¿˜å¯¼å…¥äº†å…¶å®ƒçš„åŒ…ï¼Œé‚£ä¹ˆä¼šå…ˆå°†å…¶å®ƒåŒ…å¯¼å…¥è¿›æ¥ï¼Œç„¶åå†å¯¹è¿™äº›åŒ…ä¸­çš„åŒ…çº§å¸¸é‡å’Œå˜é‡è¿›è¡Œåˆå§‹åŒ–ï¼Œæ¥ç€æ‰§è¡Œinitå‡½æ•°ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ï¼Œä¾æ¬¡ç±»æ¨ã€‚ç­‰æ‰€æœ‰è¢«å¯¼å…¥çš„åŒ…éƒ½åŠ è½½å®Œæ¯•äº†ï¼Œå°±ä¼šå¼€å§‹å¯¹mainåŒ…ä¸­çš„åŒ…çº§å¸¸é‡å’Œå˜é‡è¿›è¡Œåˆå§‹åŒ–ï¼Œç„¶åæ‰§è¡ŒmainåŒ…ä¸­çš„initå‡½æ•°ï¼ˆå¦‚æœå­˜åœ¨çš„è¯ï¼‰ï¼Œæœ€åæ‰§è¡Œmainå‡½æ•°ã€‚ä¸‹å›¾è¯¦ç»†åœ°è§£é‡Šäº†æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹ï¼š

![mainå’Œinitæ‰§è¡Œæµç¨‹](https://github.com/astaxie/build-web-application-with-golang/raw/master/zh/images/2.3.init.png?raw=true)

#### import

æˆ‘ä»¬åœ¨å†™Goä»£ç çš„æ—¶å€™ç»å¸¸ç”¨åˆ°importè¿™ä¸ªå‘½ä»¤ç”¨æ¥å¯¼å…¥åŒ…æ–‡ä»¶ï¼Œè€Œæˆ‘ä»¬ç»å¸¸çœ‹åˆ°çš„æ–¹å¼å‚è€ƒå¦‚ä¸‹ï¼š

```go
import(
    "fmt"
)
```

ç„¶åæˆ‘ä»¬ä»£ç é‡Œé¢å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„æ–¹å¼è°ƒç”¨

`fmt.Println("hello world")`

ä¸Šé¢è¿™ä¸ªfmtæ˜¯Goè¯­è¨€çš„æ ‡å‡†åº“ï¼Œå…¶å®æ˜¯å»GOROOTç¯å¢ƒå˜é‡æŒ‡å®šç›®å½•ä¸‹å»åŠ è½½è¯¥æ¨¡å—ï¼Œå½“ç„¶Goçš„importè¿˜æ”¯æŒå¦‚ä¸‹ä¸¤ç§æ–¹å¼æ¥åŠ è½½è‡ªå·±å†™çš„æ¨¡å—ï¼š

ç›¸å¯¹è·¯å¾„

`import â€œ./modelâ€ //å½“å‰æ–‡ä»¶åŒä¸€ç›®å½•çš„modelç›®å½•ï¼Œä½†æ˜¯ä¸å»ºè®®è¿™ç§æ–¹å¼æ¥import`

ç»å¯¹è·¯å¾„

`import â€œshorturl/modelâ€ //åŠ è½½gopath/src/shorturl/modelæ¨¡å—`

ä¸Šé¢å±•ç¤ºäº†ä¸€äº›importå¸¸ç”¨çš„å‡ ç§æ–¹å¼ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€äº›ç‰¹æ®Šçš„importï¼Œè®©å¾ˆå¤šæ–°æ‰‹å¾ˆè´¹è§£ï¼Œä¸‹é¢æˆ‘ä»¬æ¥ä¸€ä¸€è®²è§£ä¸€ä¸‹åˆ°åº•æ˜¯æ€ä¹ˆä¸€å›äº‹

ç‚¹æ“ä½œ

æˆ‘ä»¬æœ‰æ—¶å€™ä¼šçœ‹åˆ°å¦‚ä¸‹çš„æ–¹å¼å¯¼å…¥åŒ…

```go
import(
    . "fmt"
)
```

è¿™ä¸ªç‚¹æ“ä½œçš„å«ä¹‰å°±æ˜¯è¿™ä¸ªåŒ…å¯¼å…¥ä¹‹ååœ¨ä½ è°ƒç”¨è¿™ä¸ªåŒ…çš„å‡½æ•°æ—¶ï¼Œä½ å¯ä»¥çœç•¥å‰ç¼€çš„åŒ…åï¼Œä¹Ÿå°±æ˜¯å‰é¢ä½ è°ƒç”¨çš„fmt.Println("hello world")å¯ä»¥çœç•¥çš„å†™æˆPrintln("hello world")

åˆ«åæ“ä½œ

åˆ«åæ“ä½œé¡¾åæ€ä¹‰æˆ‘ä»¬å¯ä»¥æŠŠåŒ…å‘½åæˆå¦ä¸€ä¸ªæˆ‘ä»¬ç”¨èµ·æ¥å®¹æ˜“è®°å¿†çš„åå­—

```go
import(
    f "fmt"
)
```

åˆ«åæ“ä½œçš„è¯è°ƒç”¨åŒ…å‡½æ•°æ—¶å‰ç¼€å˜æˆäº†æˆ‘ä»¬çš„å‰ç¼€ï¼Œå³f.Println("hello world")

_æ“ä½œ

è¿™ä¸ªæ“ä½œç»å¸¸æ˜¯è®©å¾ˆå¤šäººè´¹è§£çš„ä¸€ä¸ªæ“ä½œç¬¦ï¼Œè¯·çœ‹ä¸‹é¢è¿™ä¸ªimport

```go
import (
    "database/sql"
    _ "github.com/ziutek/mymysql/godrv"
)
```

_æ“ä½œå…¶å®æ˜¯å¼•å…¥è¯¥åŒ…ï¼Œè€Œä¸ç›´æ¥ä½¿ç”¨åŒ…é‡Œé¢çš„å‡½æ•°ï¼Œè€Œæ˜¯è°ƒç”¨äº†è¯¥åŒ…é‡Œé¢çš„initå‡½æ•°ã€‚

## structå’Œinterface

### struct

```go
type person struct {
    name string
    age int
}

var P person  // Pç°åœ¨å°±æ˜¯personç±»å‹çš„å˜é‡äº†

P.name = "Astaxie"  // èµ‹å€¼"Astaxie"ç»™Pçš„nameå±æ€§.
P.age = 25  // èµ‹å€¼"25"ç»™å˜é‡Pçš„ageå±æ€§
fmt.Printf("The person's name is %s", P.name)  // è®¿é—®Pçš„nameå±æ€§.
```

```go
// æŒ‰ç…§é¡ºåºæä¾›åˆå§‹åŒ–å€¼
P := person{"Tom", 25}

// é€šè¿‡field:valueçš„æ–¹å¼åˆå§‹åŒ–ï¼Œè¿™æ ·å¯ä»¥ä»»æ„é¡ºåº
P := person{age:24, name:"Tom"}

// å½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡newå‡½æ•°åˆ†é…ä¸€ä¸ªæŒ‡é’ˆï¼Œæ­¤å¤„Pçš„ç±»å‹ä¸º*person
P := new(person)
```

åŒ¿åå­—æ®µ

```go
package main

import "fmt"

type Human struct {
    name string
    age int
    phone string  // Humanç±»å‹æ‹¥æœ‰çš„å­—æ®µ
}

type Employee struct {
    Human  // åŒ¿åå­—æ®µHuman
    speciality string
    phone string  // é›‡å‘˜çš„phoneå­—æ®µ
}

func main() {
    Bob := Employee{Human{"Bob", 34, "777-444-XXXX"}, "Designer", "333-222"}
    fmt.Println("Bob's work phone is:", Bob.phone)
    // å¦‚æœæˆ‘ä»¬è¦è®¿é—®Humançš„phoneå­—æ®µ
    fmt.Println("Bob's personal phone is:", Bob.Human.phone)
}
```

é¢å‘å¯¹è±¡

å¦‚æœä¸€ä¸ªå‡½æ•°æœ‰æ¥æ”¶è€…ï¼Œè¿™ä¸ªå‡½æ•°å°±è¢«ç§° ä¸ºæ–¹æ³•

```go
package main

import (
    "fmt"
    "math"
)

type Rectangle struct {
    width, height float64
}

type Circle struct {
    radius float64
}

func (r Rectangle) area() float64 {
    return r.width*r.height
}

func (c Circle) area() float64 {
    return c.radius * c.radius * math.Pi
}


func main() {
    r1 := Rectangle{12, 2}
    r2 := Rectangle{9, 4}
    c1 := Circle{10}
    c2 := Circle{25}

    fmt.Println("Area of r1 is: ", r1.area())
    fmt.Println("Area of r2 is: ", r2.area())
    fmt.Println("Area of c1 is: ", c1.area())
    fmt.Println("Area of c2 is: ", c2.area())
}
```

### interface

interfaceæ˜¯ä¸€ç»„methodç­¾åçš„ç»„åˆã€‚æ¥å£æ˜¯ç”¨æ¥å®šä¹‰è¡Œä¸ºçš„ç±»å‹ã€‚è¿™äº›è¢«å®šä¹‰çš„è¡Œä¸ºä¸ç”±æ¥å£ç›´æ¥å®ç°ï¼Œè€Œæ˜¯é€šè¿‡æ–¹æ³•ç”±ç”¨æˆ· å®šä¹‰çš„ç±»å‹å®ç°ã€‚å¦‚æœç”¨æˆ·å®šä¹‰çš„ç±»å‹å®ç°äº†æŸä¸ªæ¥å£ç±»å‹å£°æ˜çš„ä¸€ç»„æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªç”¨æˆ·å®š ä¹‰çš„ç±»å‹çš„å€¼å°±å¯ä»¥èµ‹ç»™è¿™ä¸ªæ¥å£ç±»å‹çš„å€¼ã€‚è¿™ä¸ªèµ‹å€¼ä¼šæŠŠç”¨æˆ·å®šä¹‰çš„ç±»å‹çš„å€¼å­˜å…¥æ¥å£ç±»å‹ çš„å€¼ã€‚å¯¹æ¥å£å€¼æ–¹æ³•çš„è°ƒç”¨ä¼šæ‰§è¡Œæ¥å£å€¼é‡Œå­˜å‚¨çš„ç”¨æˆ·å®šä¹‰çš„ç±»å‹çš„å€¼å¯¹åº”çš„æ–¹æ³•ã€‚

æˆ‘ä»¬é€šè¿‡interfaceæ¥å®šä¹‰å¯¹è±¡çš„ä¸€ç»„è¡Œä¸º

```go
package main

import (
     "fmt"
)

// notifieræ˜¯ä¸€ä¸ªå®šä¹‰äº†
// é€šçŸ¥ç±»è¡Œä¸ºçš„æ¥å£
type notifier interface {
    notify()
}

// useråœ¨ç¨‹åºé‡Œå®šä¹‰ä¸€ä¸ªç”¨æˆ·ç±»å‹
type user struct {
    name  string
    email string
}

// notifyæ˜¯ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…å®ç°çš„æ–¹æ³•
func (u *user) notify() {
    fmt.Printf("Sending user email to %s<%s>\n",
    u.name,
    u.email)
}

// mainæ˜¯åº”ç”¨ç¨‹åºçš„å…¥å£
func main() {
    // åˆ›å»ºä¸€ä¸ªuserç±»å‹çš„å€¼ï¼Œå¹¶å‘é€é€šçŸ¥
    u := user{"Bill", "bill@email.com"}
    // u.notify()
    var n notifier
    n = &u
    n.notify()
    // ./listing36.go:32: ä¸èƒ½å°†uï¼ˆç±»å‹æ˜¯userï¼‰ä½œä¸º
    //                        sendNotificationçš„å‚æ•°ç±»å‹notifierï¼š
    //   userç±»å‹å¹¶æ²¡æœ‰å®ç°notifier
    //                                ï¼ˆnotifyæ–¹æ³•ä½¿ç”¨æŒ‡é’ˆæ¥æ”¶è€…å£°æ˜ï¼‰
}
```

**å¦‚æœä½¿ç”¨æŒ‡ é’ˆæ¥æ”¶è€…æ¥å®ç°ä¸€ä¸ªæ¥å£ï¼Œé‚£ä¹ˆåªæœ‰æŒ‡å‘é‚£ä¸ªç±»å‹çš„æŒ‡é’ˆæ‰èƒ½å¤Ÿå®ç°å¯¹åº”çš„æ¥å£ã€‚å¦‚æœä½¿ç”¨å€¼ æ¥æ”¶è€…æ¥å®ç°ä¸€ä¸ªæ¥å£ï¼Œé‚£ä¹ˆé‚£ä¸ªç±»å‹çš„å€¼å’ŒæŒ‡é’ˆéƒ½èƒ½å¤Ÿå®ç°å¯¹åº”çš„æ¥å£ã€‚**

æ–¹æ³•é›†è§„åˆ™

Values  | Methods Receivers
|-------|--------------------|
T       | (t T)
*T      | (t T) and (t *T)

Methods Receivers   | Values
|-------------------|-------------|
(t T)               | T and *T
(t *T)              | *T

**å› ä¸ºä¸æ˜¯æ€»èƒ½è·å–ä¸€ä¸ªå€¼çš„åœ°å€ï¼Œæ‰€ä»¥å€¼çš„æ–¹æ³•é›†åªåŒ…æ‹¬äº†ä½¿ç”¨å€¼æ¥æ”¶è€…å®ç°çš„æ–¹æ³•ã€‚**

æœªå…¬å¼€çš„æ ‡è¯†ç¬¦

**å½“ä¸€ä¸ªæ ‡è¯†ç¬¦çš„åå­—ä»¥å°å†™å­—æ¯å¼€å¤´æ—¶ï¼Œè¿™ä¸ªæ ‡è¯†ç¬¦å°±æ˜¯æœªå…¬å¼€çš„ï¼Œå³åŒ…å¤–çš„ä»£ç ä¸å¯è§ã€‚ å¦‚æœä¸€ä¸ªæ ‡è¯†ç¬¦ä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼Œè¿™ä¸ªæ ‡è¯†ç¬¦å°±æ˜¯å…¬å¼€çš„ï¼Œå³è¢«åŒ…å¤–çš„ä»£ç å¯è§ã€‚**

æ–°å»ºä¸€ä¸ªåŒ…counters

```go
package counters

type alertCounter int

func New(value int) alertCounter {
    return alertCounter(value)
}

type User struct {
    Name  string
    Email string
}
```

åœ¨mainå‡½æ•°ä¸­ï¼š

```go
package main

import (
    "fmt"

    "./counters"
)

func main() {
    fmt.Println(counters.alertCounter(10)) //æŠ¥é”™cannot refer to unexported name counters.alertCounter
    count := counters.New(10)
    fmt.Println(count)
    u := counters.User{
        Name:  "bill",
        Email: "bill@gmail.com",
    }
    fmt.Println(u)
}
```

ç©ºinterface
> ç©ºinterface(interface{})ä¸åŒ…å«ä»»ä½•çš„methodï¼Œæ­£å› ä¸ºå¦‚æ­¤ï¼Œæ‰€æœ‰çš„ç±»å‹éƒ½å®ç°äº†ç©ºinterfaceã€‚ç©ºinterfaceå¯¹äºæè¿°èµ·ä¸åˆ°ä»»ä½•çš„ä½œç”¨(å› ä¸ºå®ƒä¸åŒ…å«ä»»ä½•çš„methodï¼‰ï¼Œä½†æ˜¯ç©ºinterfaceåœ¨æˆ‘ä»¬éœ€è¦å­˜å‚¨ä»»æ„ç±»å‹çš„æ•°å€¼çš„æ—¶å€™ç›¸å½“æœ‰ç”¨ï¼Œå› ä¸ºå®ƒå¯ä»¥å­˜å‚¨ä»»æ„ç±»å‹çš„æ•°å€¼ã€‚å®ƒæœ‰ç‚¹ç±»ä¼¼äºCè¯­è¨€çš„void*ç±»å‹ã€‚

```go
// å®šä¹‰aä¸ºç©ºæ¥å£
var a interface{}
var i int = 5
s := "Hello world"
// aå¯ä»¥å­˜å‚¨ä»»æ„ç±»å‹çš„æ•°å€¼
a = i
a = s
```

## é€šé“å’Œå¹¶å‘

### goroutine

> goroutineæ˜¯Goå¹¶è¡Œè®¾è®¡çš„æ ¸å¿ƒã€‚goroutineè¯´åˆ°åº•å…¶å®å°±æ˜¯åç¨‹ï¼Œä½†æ˜¯å®ƒæ¯”çº¿ç¨‹æ›´å°ï¼Œåå‡ ä¸ªgoroutineå¯èƒ½ä½“ç°åœ¨åº•å±‚å°±æ˜¯äº”å…­ä¸ªçº¿ç¨‹ï¼ŒGoè¯­è¨€å†…éƒ¨å¸®ä½ å®ç°äº†è¿™äº›goroutineä¹‹é—´çš„å†…å­˜å…±äº«ã€‚æ‰§è¡Œgoroutineåªéœ€æå°‘çš„æ ˆå†…å­˜(å¤§æ¦‚æ˜¯4~5KB)ï¼Œå½“ç„¶ä¼šæ ¹æ®ç›¸åº”çš„æ•°æ®ä¼¸ç¼©ã€‚ä¹Ÿæ­£å› ä¸ºå¦‚æ­¤ï¼Œå¯åŒæ—¶è¿è¡Œæˆåƒä¸Šä¸‡ä¸ªå¹¶å‘ä»»åŠ¡ã€‚goroutineæ¯”threadæ›´æ˜“ç”¨ã€æ›´é«˜æ•ˆã€æ›´è½»ä¾¿ã€‚

```go
package main

import (
    "fmt"
    "runtime"
    "sync"
)

func main() {
    runtime.GOMAXPROCS(2)
    var wg sync.WaitGroup
    wg.Add(2)
    fmt.Println("Start Goroutines")
    go func() {
        defer wg.Done()
        for count := 0; count < 3; count++ {
            for char := 'a'; char < 'a'+26; char++ {
                fmt.Printf("%c ", char)
            }
        }
    }()
    go func() {
        defer wg.Done()
        for count := 0; count < 3; count++ {
            for char := 'A'; char < 'A'+26; char++ {
                fmt.Printf("%c ", char)
            }
        }
    }()
    fmt.Println("Waiting To Finish")
    wg.Wait()
    fmt.Println("\nTerminating Program")
}
```

### channels

goroutineè¿è¡Œåœ¨ç›¸åŒçš„åœ°å€ç©ºé—´ï¼Œå› æ­¤è®¿é—®å…±äº«å†…å­˜å¿…é¡»åšå¥½åŒæ­¥ã€‚é‚£ä¹ˆgoroutineä¹‹é—´å¦‚ä½•è¿›è¡Œæ•°æ®çš„é€šä¿¡å‘¢ï¼ŒGoæä¾›äº†ä¸€ä¸ªå¾ˆå¥½çš„é€šä¿¡æœºåˆ¶channelã€‚channelå¯ä»¥ä¸Unix shell ä¸­çš„åŒå‘ç®¡é“åšç±»æ¯”ï¼šå¯ä»¥é€šè¿‡å®ƒå‘é€æˆ–è€…æ¥æ”¶å€¼ã€‚è¿™äº›å€¼åªèƒ½æ˜¯ç‰¹å®šçš„ç±»å‹ï¼šchannelç±»å‹ã€‚å®šä¹‰ä¸€ä¸ªchannelæ—¶ï¼Œä¹Ÿéœ€è¦å®šä¹‰å‘é€åˆ°channelçš„å€¼çš„ç±»å‹ã€‚æ³¨æ„ï¼Œå¿…é¡»ä½¿ç”¨make åˆ›å»ºchannelï¼š

```go
// æ— ç¼“å†²çš„æ•´å‹é€šé“
unbuffered := make(chan int)
// æœ‰ç¼“å†²çš„å­—ç¬¦ä¸²é€šé“
buffered := make(chan string, 10)
// é€šè¿‡é€šé“å‘é€ä¸€ä¸ªå­—ç¬¦ä¸²
buffered <- "Gopher"
// ä»é€šé“æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²
value := <-buffered 
```

æ— ç¼“å†²çš„é€šé“ï¼ˆunbuffered channelï¼‰æ˜¯æŒ‡åœ¨æ¥æ”¶å‰æ²¡æœ‰èƒ½åŠ›ä¿å­˜ä»»ä½•å€¼çš„é€šé“ã€‚è¿™ç§ç±»å‹çš„é€š é“è¦æ±‚å‘é€ goroutine å’Œæ¥æ”¶ goroutine åŒæ—¶å‡†å¤‡å¥½ï¼Œæ‰èƒ½å®Œæˆå‘é€å’Œæ¥æ”¶æ“ä½œã€‚å¦‚æœä¸¤ä¸ªgoroutine æ²¡æœ‰åŒæ—¶å‡†å¤‡å¥½ï¼Œé€šé“ä¼šå¯¼è‡´å…ˆæ‰§è¡Œå‘é€æˆ–æ¥æ”¶æ“ä½œçš„ goroutine é˜»å¡ç­‰å¾…ã€‚è¿™ç§å¯¹é€šé“è¿›è¡Œå‘é€ å’Œæ¥æ”¶çš„äº¤äº’è¡Œä¸ºæœ¬èº«å°±æ˜¯åŒæ­¥çš„ã€‚å…¶ä¸­ä»»æ„ä¸€ä¸ªæ“ä½œéƒ½æ— æ³•ç¦»å¼€å¦ä¸€ä¸ªæ“ä½œå•ç‹¬å­˜åœ¨ã€‚ 

![unbuffered channel](https://shengjieli.github.io/img/unbufferedchannel.png)


æœ‰ç¼“å†²çš„é€šé“ï¼ˆbuffered channelï¼‰æ˜¯ä¸€ç§åœ¨è¢«æ¥æ”¶å‰èƒ½å­˜å‚¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªå€¼çš„é€šé“ã€‚è¿™ç§ç±» å‹çš„é€šé“å¹¶ä¸å¼ºåˆ¶è¦æ±‚ goroutine ä¹‹é—´å¿…é¡»åŒæ—¶å®Œæˆå‘é€å’Œæ¥æ”¶ã€‚é€šé“ä¼šé˜»å¡å‘é€å’Œæ¥æ”¶åŠ¨ä½œçš„ æ¡ä»¶ä¹Ÿä¼šä¸åŒã€‚åªæœ‰åœ¨é€šé“ä¸­æ²¡æœ‰è¦æ¥æ”¶çš„å€¼æ—¶ï¼Œæ¥æ”¶åŠ¨ä½œæ‰ä¼šé˜»å¡ã€‚åªæœ‰åœ¨é€šé“æ²¡æœ‰å¯ç”¨ç¼“å†² åŒºå®¹çº³è¢«å‘é€çš„å€¼æ—¶ï¼Œå‘é€åŠ¨ä½œæ‰ä¼šé˜»å¡ã€‚è¿™å¯¼è‡´æœ‰ç¼“å†²çš„é€šé“å’Œæ— ç¼“å†²çš„é€šé“ä¹‹é—´çš„ä¸€ä¸ªå¾ˆå¤§ çš„ä¸åŒï¼šæ— ç¼“å†²çš„é€šé“ä¿è¯è¿›è¡Œå‘é€å’Œæ¥æ”¶çš„ goroutine ä¼šåœ¨åŒä¸€æ—¶é—´è¿›è¡Œæ•°æ®äº¤æ¢ï¼›æœ‰ç¼“å†²çš„ é€šé“æ²¡æœ‰è¿™ç§ä¿è¯ã€‚

![buffered channel](https://shengjieli.github.io/img/bufferedchannel.png)

Rangeå’ŒClose
Goå¯ä»¥é€šè¿‡rangeï¼Œåƒæ“ä½œsliceæˆ–è€…mapä¸€æ ·æ“ä½œç¼“å­˜ç±»å‹çš„channelï¼Œè¯·çœ‹ä¸‹é¢çš„ä¾‹å­

```go
package main

import (
    "fmt"
)

func fibonacci(n int, c chan int) {
    x, y := 1, 1
    for i := 0; i < n; i++ {
        c <- x
        x, y = y, x + y
    }
    close(c)
}

func main() {
    c := make(chan int, 10)
    go fibonacci(cap(c), c)
    for i := range c {
        fmt.Println(i)
    }
}
```

for i := range cèƒ½å¤Ÿä¸æ–­çš„è¯»å–channelé‡Œé¢çš„æ•°æ®ï¼Œç›´åˆ°è¯¥channelè¢«æ˜¾å¼çš„å…³é—­ã€‚ä¸Šé¢ä»£ç æˆ‘ä»¬çœ‹åˆ°å¯ä»¥æ˜¾å¼çš„å…³é—­channelï¼Œç”Ÿäº§è€…é€šè¿‡å†…ç½®å‡½æ•°closeå…³é—­channelã€‚å…³é—­channelä¹‹åå°±æ— æ³•å†å‘é€ä»»ä½•æ•°æ®äº†ï¼Œåœ¨æ¶ˆè´¹æ–¹å¯ä»¥é€šè¿‡è¯­æ³•v, ok := <-chæµ‹è¯•channelæ˜¯å¦è¢«å…³é—­ã€‚å¦‚æœokè¿”å›falseï¼Œé‚£ä¹ˆè¯´æ˜channelå·²ç»æ²¡æœ‰ä»»ä½•æ•°æ®å¹¶ä¸”å·²ç»è¢«å…³é—­ã€‚

### select

æˆ‘ä»¬ä¸Šé¢ä»‹ç»çš„éƒ½æ˜¯åªæœ‰ä¸€ä¸ªchannelçš„æƒ…å†µï¼Œé‚£ä¹ˆå¦‚æœå­˜åœ¨å¤šä¸ªchannelçš„æ—¶å€™ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•æ“ä½œå‘¢ï¼ŒGoé‡Œé¢æä¾›äº†ä¸€ä¸ªå…³é”®å­—selectï¼Œé€šè¿‡selectå¯ä»¥ç›‘å¬channelä¸Šçš„æ•°æ®æµåŠ¨ã€‚
selecté»˜è®¤æ˜¯é˜»å¡çš„ï¼Œåªæœ‰å½“ç›‘å¬çš„channelä¸­æœ‰å‘é€æˆ–æ¥æ”¶å¯ä»¥è¿›è¡Œæ—¶æ‰ä¼šè¿è¡Œï¼Œå½“å¤šä¸ªchanneléƒ½å‡†å¤‡å¥½çš„æ—¶å€™ï¼Œselectæ˜¯éšæœºçš„é€‰æ‹©ä¸€ä¸ªæ‰§è¡Œçš„ã€‚

```go
package main

import "fmt"

func fibonacci(c, quit chan int) {
    x, y := 1, 1
    for {
        select {
        case c <- x:
            x, y = y, x + y
        case <-quit:
            fmt.Println("quit")
            return
        }
    }
}

func main() {
    c := make(chan int)
    quit := make(chan int)
    go func() {
        for i := 0; i < 10; i++ {
            fmt.Println(<-c)
        }
        quit <- 0
    }()
    fibonacci(c, quit)
}
```

åœ¨selecté‡Œé¢è¿˜æœ‰defaultè¯­æ³•ï¼Œselectå…¶å®å°±æ˜¯ç±»ä¼¼switchçš„åŠŸèƒ½ï¼Œdefaultå°±æ˜¯å½“ç›‘å¬çš„channeléƒ½æ²¡æœ‰å‡†å¤‡å¥½çš„æ—¶å€™ï¼Œé»˜è®¤æ‰§è¡Œçš„ï¼ˆselectä¸å†é˜»å¡ç­‰å¾…channelï¼‰ã€‚

```go
select {
case i := <-c:
    // use i
default:
    // å½“cé˜»å¡çš„æ—¶å€™æ‰§è¡Œè¿™é‡Œ
}
```


## æ ‡å‡†åº“(JSONï¼Œæ­£åˆ™)

### è§£ç JSON

Goçš„JSONåŒ…ä¸­æœ‰å¦‚ä¸‹å‡½æ•°

`func Unmarshal(data []byte, v interface{}) error`

é€šè¿‡è¿™ä¸ªå‡½æ•°æˆ‘ä»¬å°±å¯ä»¥å®ç°è§£æçš„ç›®çš„ï¼š

```go
package main

import (
    "encoding/json"
    "fmt"
)

type Server struct {
    ServerName string
    ServerIP   string
}

type Serverslice struct {
    Servers []Server
}

func main() {
    var s Serverslice
    str := `{"servers":[{"serverName":"Shanghai_VPN","serverIP":"127.0.0.1"},{"serverName":"Beijing_VPN","serverIP":"127.0.0.2"}]}`
    json.Unmarshal([]byte(str), &s)
    fmt.Println(s)
}
```

æœ‰æ—¶ï¼Œæ— æ³•ä¸º JSON çš„æ ¼å¼å£°æ˜ä¸€ä¸ªç»“æ„ç±»å‹ï¼Œè€Œæ˜¯éœ€è¦æ›´åŠ çµæ´»çš„æ–¹å¼æ¥å¤„ç† JSON æ–‡æ¡£ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥å°† JSON æ–‡æ¡£è§£ç åˆ°ä¸€ä¸ªmapå˜é‡ä¸­ã€‚

```go
// è¿™ä¸ªç¤ºä¾‹ç¨‹åºå±•ç¤ºå¦‚ä½•è§£ç JSONå­—ç¬¦ä¸²
package main

import (
    "encoding/json"
    "fmt"
    "log"
)

// JSONåŒ…å«è¦ååºåˆ—åŒ–çš„æ ·ä¾‹å­—ç¬¦ä¸²
var JSON = `{
     "name": "Gopher",
     "title": "programmer",
     "contact": {
         "home": "415.333.3333",
         "cell": "415.555.5555"
     }
 }`

func main() {
    // å°†JSONå­—ç¬¦ä¸²ååºåˆ—åŒ–åˆ°mapå˜é‡
    var c map[string]interface{}
    err := json.Unmarshal([]byte(JSON), &c)
    if err != nil {
        log.Println("ERROR:", err)
        return
}

    fmt.Println("Name:", c["name"])
    fmt.Println("Title:", c["title"])
    fmt.Println("Contact")
    fmt.Println("H:", c["contact"].(map[string]interface{})["home"])
    fmt.Println("C:", c["contact"].(map[string]interface{})["cell"])
}
```

### ç¼–ç JSON

æˆ‘ä»¬å¼€å‘å¾ˆå¤šåº”ç”¨çš„æ—¶å€™ï¼Œæœ€åéƒ½æ˜¯è¦è¾“å‡ºJSONæ•°æ®ä¸²ï¼Œé‚£ä¹ˆå¦‚ä½•æ¥å¤„ç†å‘¢ï¼ŸJSONåŒ…é‡Œé¢é€šè¿‡Marshalå‡½æ•°æ¥å¤„ç†ï¼Œå‡½æ•°å®šä¹‰å¦‚ä¸‹ï¼š

`func Marshal(v interface{}) ([]byte, error)`
å‡è®¾æˆ‘ä»¬è¿˜æ˜¯éœ€è¦ç”Ÿæˆä¸Šé¢çš„æœåŠ¡å™¨åˆ—è¡¨ä¿¡æ¯ï¼Œé‚£ä¹ˆå¦‚ä½•æ¥å¤„ç†å‘¢ï¼Ÿè¯·çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š

```go
package main

import (
    "encoding/json"
    "fmt"
)

type Server struct {
    ServerName string
    ServerIP   string
}

type Serverslice struct {
    Servers []Server
}

func main() {
    var s Serverslice
    s.Servers = append(s.Servers, Server{ServerName: "Shanghai_VPN", ServerIP: "127.0.0.1"})
    s.Servers = append(s.Servers, Server{ServerName: "Beijing_VPN", ServerIP: "127.0.0.2"})
    b, err := json.Marshal(s)
    if err != nil {
        fmt.Println("json err:", err)
    }
    fmt.Println(string(b))
}
```

æˆ‘ä»¬çœ‹åˆ°ä¸Šé¢çš„è¾“å‡ºå­—æ®µåçš„é¦–å­—æ¯éƒ½æ˜¯å¤§å†™çš„ï¼Œå¦‚æœä½ æƒ³ç”¨å°å†™çš„é¦–å­—æ¯æ€ä¹ˆåŠå‘¢ï¼ŸæŠŠç»“æ„ä½“çš„å­—æ®µåæ”¹æˆé¦–å­—æ¯å°å†™çš„ï¼ŸJSONè¾“å‡ºçš„æ—¶å€™å¿…é¡»æ³¨æ„ï¼Œåªæœ‰å¯¼å‡ºçš„å­—æ®µæ‰ä¼šè¢«è¾“å‡ºï¼Œå¦‚æœä¿®æ”¹å­—æ®µåï¼Œé‚£ä¹ˆå°±ä¼šå‘ç°ä»€ä¹ˆéƒ½ä¸ä¼šè¾“å‡ºï¼Œæ‰€ä»¥å¿…é¡»é€šè¿‡struct tagå®šä¹‰æ¥å®ç°ï¼š

```go
type Server struct {
    ServerName string `json:"serverName"`
    ServerIP   string `json:"serverIP"`
}

type Serverslice struct {
    Servers []Server `json:"servers"`
}
```

struct tagçš„ç‰¹æ®Šæ ‡è®°:

- å­—æ®µçš„tagæ˜¯"-"ï¼Œé‚£ä¹ˆè¿™ä¸ªå­—æ®µä¸ä¼šè¾“å‡ºåˆ°JSON
- tagä¸­å¦‚æœå¸¦æœ‰"omitempty"é€‰é¡¹ï¼Œé‚£ä¹ˆå¦‚æœè¯¥å­—æ®µå€¼ä¸ºç©ºï¼Œå°±ä¸ä¼šè¾“å‡ºåˆ°JSONä¸²ä¸­

```go
type Server struct {
    // ID ä¸ä¼šå¯¼å‡ºåˆ°JSONä¸­
    ID int `json:"-"`
    ServerName  string `json:"serverName"`
    // å¦‚æœ ServerIP ä¸ºç©ºï¼Œåˆ™ä¸è¾“å‡ºåˆ°JSONä¸²ä¸­
    ServerIP   string `json:"serverIP,omitempty"`
}

s := Server {
    ID:         3,
    ServerName:  `Go "1.0" `,
    ServerIP:   `192.168.0.1`,
}
b, _ := json.Marshal(s)
os.Stdout.Write(b)
```


### æ­£åˆ™

```go
package main

import (
    "fmt"
    "regexp"
)

func main() {
    a := "I am learning Go language"

    re, _ := regexp.Compile("[a-z]{2,4}")

    //æŸ¥æ‰¾ç¬¦åˆæ­£åˆ™çš„ç¬¬ä¸€ä¸ª
    one := re.Find([]byte(a))
    fmt.Println("Find:", string(one))

    //æŸ¥æ‰¾ç¬¦åˆæ­£åˆ™çš„æ‰€æœ‰slice,nå°äº0è¡¨ç¤ºè¿”å›å…¨éƒ¨ç¬¦åˆçš„å­—ç¬¦ä¸²ï¼Œä¸ç„¶å°±æ˜¯è¿”å›æŒ‡å®šçš„é•¿åº¦
    all := re.FindAll([]byte(a), -1)
    fmt.Println("FindAll", all)

    //æŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„indexä½ç½®,å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®
    index := re.FindIndex([]byte(a))
    fmt.Println("FindIndex", index)

    //æŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰çš„indexä½ç½®ï¼ŒnåŒä¸Š
    allindex := re.FindAllIndex([]byte(a), -1)
    fmt.Println("FindAllIndex", allindex)

    re2, _ := regexp.Compile("am(.*)lang(.*)")

    //æŸ¥æ‰¾Submatch,è¿”å›æ•°ç»„ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯åŒ¹é…çš„å…¨éƒ¨å…ƒç´ ï¼Œç¬¬äºŒä¸ªå…ƒç´ æ˜¯ç¬¬ä¸€ä¸ª()é‡Œé¢çš„ï¼Œç¬¬ä¸‰ä¸ªæ˜¯ç¬¬äºŒä¸ª()é‡Œé¢çš„
    //ä¸‹é¢çš„è¾“å‡ºç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯"am learning Go language"
    //ç¬¬äºŒä¸ªå…ƒç´ æ˜¯" learning Go "ï¼Œæ³¨æ„åŒ…å«ç©ºæ ¼çš„è¾“å‡º
    //ç¬¬ä¸‰ä¸ªå…ƒç´ æ˜¯"uage"
    submatch := re2.FindSubmatch([]byte(a))
    fmt.Println("FindSubmatch", submatch)
    for _, v := range submatch {
        fmt.Println(string(v))
    }

    //å®šä¹‰å’Œä¸Šé¢çš„FindIndexä¸€æ ·
    submatchindex := re2.FindSubmatchIndex([]byte(a))
    fmt.Println(submatchindex)

    //FindAllSubmatch,æŸ¥æ‰¾æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„å­åŒ¹é…
    submatchall := re2.FindAllSubmatch([]byte(a), -1)
    fmt.Println(submatchall)

    //FindAllSubmatchIndex,æŸ¥æ‰¾æ‰€æœ‰å­—åŒ¹é…çš„index
    submatchallindex := re2.FindAllSubmatchIndex([]byte(a), -1)
    fmt.Println(submatchallindex)
}
```

### goè¿æ¥mysql

```go
package main

import (
    "database/sql"
    "fmt"

    _ "github.com/go-sql-driver/mysql"
)

func main() {
    testCon := "user:password@tcp(192.168.58.128:3306)/test?charset=utf8"
    db, err := sql.Open("mysql", testCon)
    if err != nil {
        fmt.Println(err)
    }
    defer db.Close()
    // sql := "select catid,name,count from book_cats where level=?"
    // level := 0
    // rows, err := db.Query(sql, level)
    // if err != nil {
    //     fmt.Println(err)
    // }
    // var catid string
    // var name string
    // var count int
    // for rows.Next() {
    //     rows.Scan(&catid, &name, &count)
    //     fmt.Printf("catid:%v, \name:%v, \tcount%v\n", catid, name, count)
    // }
    sql2 := "insert into book_cats(catid, name,count) value(?,?,?)"
    result, err := db.Exec(sql2, 1112, "testcat2", 1002)
    if err != nil {
        fmt.Println(err)
    }
    lastID, _ := result.LastInsertId()
    fmt.Println(lastID)
}
```

## çˆ¬è™«

ä»£ç åœ¨æ–‡ä»¶ä¸­

## å‚è€ƒèµ„æ–™

æœ¬æ–‡å¤§éƒ¨åˆ†å†…å®¹æ¥è‡ªè¿™ä¸¤æœ¬ä¹¦

**ã€ŠGo Web ç¼–ç¨‹ã€‹ è°¢å­Ÿå†› è‘—**
å›½å†…go webå¼€å‘æ¡†æ¶beegoä½œè€…
githubï¼š[build-web-application-with-golang](https://github.com/astaxie/build-web-application-with-golang)

**ã€ŠGo In Actionã€‹ Goè¯­è¨€å®æˆ˜**
[ç¾] å¨å»‰Â·è‚¯å°¼è¿ªï¼ˆWilliamï¼ŒKennedyï¼‰
å¸ƒèµ–æ©Â·å…‹ç‰¹æ£®ï¼ˆBrianï¼ŒKetelsenï¼‰
åŸƒé‡Œå…‹Â·åœ£é©¬ä¸ï¼ˆErikï¼ŒSt.Martinï¼‰ è‘—
æå…†æµ· è¯‘


### çˆ¬è™«

[GitHub - henrylee2cn/pholcus: [Crawler for Golang] Pholcus is a distributed, high concurrency and powerful web crawler software.](https://github.com/henrylee2cn/pholcus)

[Introduction | Pholcus å®Œå…¨æ‰‹å†Œ](https://pholcus.gitbooks.io/docs/content/)

[go ç®€å•çˆ¬è™« - Goè¯­è¨€ä¸­æ–‡ç½‘ - Golangä¸­æ–‡ç¤¾åŒº](http://studygolang.com/articles/6017)

[Creeperé¦–é¡µã€æ–‡æ¡£å’Œä¸‹è½½ - Go ç‰ˆæœ¬å¼€æºçˆ¬è™«æ¡†æ¶ - å¼€æºä¸­å›½ç¤¾åŒº](https://www.oschina.net/p/creeper)

[å®ç°ä¸€ä¸ªgoè¯­è¨€çš„ç®€å•çˆ¬è™«æ¥çˆ¬å–CSDNåšæ–‡(ä¸€) - Goè¯­è¨€ä¸­æ–‡ç½‘ - Golangä¸­æ–‡ç¤¾åŒº](http://studygolang.com/articles/5658)

[Request ç»“æ„ä½“ | Pholcus å®Œå…¨æ‰‹å†Œ](https://pholcus.gitbooks.io/docs/content/zh/03.2.html)

[ã€è®°å½•ã€‘goè¯­è¨€ä¸­å¤„ç†httpçš„cookie - åœ¨è·¯ä¸Š](https://www.crifan.com/go_language_process_http_cookie/)

[golangè¯­è¨€ä¸­å‘èµ·httpè¯·æ±‚ - Goè¯­è¨€ä¸­æ–‡ç½‘ - Golangä¸­æ–‡ç¤¾åŒº](https://studygolang.com/articles/2355)

### è¯­è¨€

[goè¯­è¨€æŒ‡é’ˆç¬¦å·çš„*å’Œ& - Goè¯­è¨€ä¸­æ–‡ç½‘ - Golangä¸­æ–‡ç¤¾åŒº](http://studygolang.com/articles/108)

[Goè¯­è¨€å­¦ä¹ :Channelæ˜¯ä»€ä¹ˆï¼Ÿ - CSDNåšå®¢](http://blog.csdn.net/liuxinmingcode/article/details/49232461)

[Golangå¼€å‘ç¯å¢ƒæ­å»º-Vimç¯‡ Tony Bai](http://tonybai.com/2014/11/07/golang-development-environment-for-vim/)

[Centos7å®‰è£…Golang1.6ï¼Œå¹¶é…ç½®vimç¯å¢ƒ - Goè¯­è¨€ä¸­æ–‡ç½‘ - Golangä¸­æ–‡ç¤¾åŒº](http://studygolang.com/articles/8683)

[GOè¯­è¨€ç»ƒä¹ ï¼šchannel å·¥ç¨‹å®ä¾‹ - Goè¯­è¨€ä¸­æ–‡ç½‘ - Golangä¸­æ–‡ç¤¾åŒº](http://studygolang.com/articles/4491)

[Go è¯­è¨€ä»æ–°æ‰‹åˆ°å¤§ç¥ï¼šæ¯ä¸ªäººéƒ½ä¼šè¸©çš„äº”åä¸ªå‘ ï¼ˆ1-12ï¼‰ - å¤§èˆ’çš„åšå®¢ - SegmentFault](https://segmentfault.com/a/1190000002808365)

[GO æ–°å¼€å‘è€…è¦æ³¨æ„çš„é™·é˜±å’Œå¸¸è§é”™è¯¯](http://www.mamicode.com/info-detail-1706865.html)

[Goè¯­è¨€interfaceè¯¦è§£_Golang_è„šæœ¬ä¹‹å®¶](http://www.jb51.net/article/56812.htm)

[Goè¯­è¨€æ ‡å‡†åº“æ–‡æ¡£ä¸­æ–‡ç‰ˆ Goè¯­è¨€ä¸­æ–‡ç½‘ | Golangä¸­æ–‡ç¤¾åŒº | Golangä¸­å›½](http://studygolang.com/pkgdoc)

[Goè¯­è¨€å®æˆ˜ç¬”è®°ï¼ˆå…«ï¼‰ Go å‡½æ•°æ–¹æ³• | é£é›ªæ— æƒ…çš„åšå®¢](http://www.flysnow.org/2017/03/31/go-in-action-go-method.html)

[golang ä¸­regexpåŒ…ç”¨æ³• - Goè¯­è¨€ä¸­æ–‡ç½‘ - Golangä¸­æ–‡ç¤¾åŒº](https://studygolang.com/articles/1813)

[Go Randå°ç»“ - ä¸¹æ±Ÿæµ - åšå®¢å›­](https://www.cnblogs.com/logo-fox/p/7396710.html)


### Webå¼€å‘

[GitHub - gin-gonic/gin: Gin is a HTTP web framework written in Go (Golang). It features a Martini-like API with much better performance -- up to 40 times faster. If you need smashing performance, get yourself some Gin.](https://github.com/gin-gonic/gin)

[beego ç®€ä»‹ - beego: ç®€çº¦ & å¼ºå¤§å¹¶å­˜çš„ Go åº”ç”¨æ¡†æ¶](https://beego.me/docs/intro/)

[Welcome to Revel, the Web Framework for Go!](http://revel.github.io/)

[Goè¯­è¨€_HTTPåŒ… - è½©è„‰åˆƒ - åšå®¢å›­](http://www.cnblogs.com/yjf512/archive/2012/06/18/2554066.html)

[è°æ˜¯æœ€å¿«çš„Go Webæ¡†æ¶  é¸Ÿçª](http://colobu.com/2016/04/06/the-fastest-golang-web-framework/)

[ä¸€æ–‡è¯»æ‡‚Goçš„net/httpæ ‡å‡†åº“ - Goè¯­è¨€ä¸­æ–‡ç½‘ - Golangä¸­æ–‡ç¤¾åŒº](https://studygolang.com/articles/11849?fr=sidebar)

[goè¯­è¨€JSONå¤„ç† - liukuan73çš„ä¸“æ  - CSDNåšå®¢](http://blog.csdn.net/liukuan73/article/details/51220137)

[åœ¨Goè¯­è¨€ä¸­ä½¿ç”¨JSON - æ¨ç†åšçš„æŠ€æœ¯ä¸“æ  - CSDNåšå®¢](http://blog.csdn.net/tiaotiaoyly/article/details/38942311)

### å…¶ä»–

[Surfer é«˜å¹¶å‘åŒæ ¸æ— å¤´æµè§ˆå™¨ ï¼ˆGolangè¯­è¨€ï¼‰ - é»˜å°æ–‡ - åšå®¢å›­](http://www.cnblogs.com/lfoder/p/6565287.html)

[build-web-application-with-golang/preface.md at master  astaxie/build-web-application-with-golang](https://github.com/astaxie/build-web-application-with-golang/blob/master/zh/preface.md)

[Goè¿æ¥Kafka - CSDNåšå®¢](http://blog.csdn.net/dazheng/article/details/52995260)
